{"version":3,"file":"components-DJtJ1Bhn.js","sources":["../../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../../node_modules/react/jsx-runtime.js","../../../src/utils/PerformanceMonitor.ts","../../../src/components/FileUpload.tsx","../../../src/components/AnalysisResults.tsx","../../../src/engines/RealtimeVisualizationEngine.ts","../../../src/components/TransportControls.tsx","../../../src/components/ExportFunctionality.tsx","../../../src/components/NotificationSystem.tsx","../../../src/components/ProgressIndicators.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","export interface PerformanceMetric {\n  id: string;\n  name: string;\n  startTime: number;\n  endTime?: number;\n  duration?: number;\n  metadata?: Record<string, any>;\n  tags?: string[];\n  category: PerformanceCategory;\n}\n\nexport enum PerformanceCategory {\n  INITIALIZATION = 'initialization',\n  AUDIO_PROCESSING = 'audio_processing',\n  ANALYSIS = 'analysis',\n  VISUALIZATION = 'visualization',\n  FILE_OPERATIONS = 'file_operations',\n  USER_INTERACTION = 'user_interaction',\n  NETWORK = 'network',\n  MEMORY = 'memory',\n  RENDERING = 'rendering'\n}\n\nexport interface PerformanceAlert {\n  id: string;\n  timestamp: Date;\n  metric: string;\n  threshold: number;\n  actualValue: number;\n  severity: 'warning' | 'critical';\n  suggestion: string;\n}\n\nexport interface PerformanceReport {\n  summary: {\n    totalMetrics: number;\n    averageDuration: number;\n    slowestOperation: PerformanceMetric | null;\n    fastestOperation: PerformanceMetric | null;\n    alerts: PerformanceAlert[];\n  };\n  byCategory: Record<PerformanceCategory, {\n    count: number;\n    averageDuration: number;\n    totalDuration: number;\n    metrics: PerformanceMetric[];\n  }>;\n  memoryUsage: {\n    current: number;\n    peak: number;\n    samples: Array<{ timestamp: number; usage: number }>;\n  };\n  timeToInteractive?: number;\n  firstContentfulPaint?: number;\n  largestContentfulPaint?: number;\n}\n\nclass PerformanceMonitorClass {\n  private metrics: PerformanceMetric[] = [];\n  private alerts: PerformanceAlert[] = [];\n  private memorysamples: Array<{ timestamp: number; usage: number }> = [];\n  private thresholds: Record<string, number> = {\n    'file.upload': 2000,\n    'audio.decode': 5000,\n    'analysis.total': 30000,\n    'analysis.spectral': 3000,\n    'analysis.tempo': 5000,\n    'analysis.key': 4000,\n    'analysis.mfcc': 2000,\n    'visualization.render': 500,\n    'export.generate': 3000,\n    'ui.response': 100\n  };\n  private maxMetrics = 1000;\n  private memoryMonitorInterval: number | null = null;\n\n  constructor() {\n    this.startMemoryMonitoring();\n    this.setupPerformanceObserver();\n  }\n\n  private setupPerformanceObserver(): void {\n    try {\n      // Observe paint timing\n      if ('PerformanceObserver' in window) {\n        const paintObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.recordSystemMetric(entry.name, entry.startTime, {\n              entryType: entry.entryType,\n              duration: entry.duration\n            });\n          }\n        });\n        paintObserver.observe({ entryTypes: ['paint'] });\n\n        // Observe largest contentful paint\n        const lcpObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.recordSystemMetric('largest-contentful-paint', entry.startTime, {\n              size: (entry as any).size,\n              element: (entry as any).element?.tagName\n            });\n          }\n        });\n        lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });\n\n        // Observe layout shifts\n        const clsObserver = new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            this.recordSystemMetric('cumulative-layout-shift', performance.now(), {\n              value: (entry as any).value,\n              hadRecentInput: (entry as any).hadRecentInput\n            });\n          }\n        });\n        clsObserver.observe({ entryTypes: ['layout-shift'] });\n      }\n    } catch (error) {\n      console.warn('Performance Observer not supported:', error);\n    }\n  }\n\n  private startMemoryMonitoring(): void {\n    this.memoryMonitorInterval = window.setInterval(() => {\n      const memoryUsage = this.getCurrentMemoryUsage();\n      if (memoryUsage > 0) {\n        this.memorysamples.push({\n          timestamp: Date.now(),\n          usage: memoryUsage\n        });\n\n        // Keep only last 100 samples (about 100 seconds)\n        if (this.memorysamples.length > 100) {\n          this.memorysamples = this.memorysamples.slice(-100);\n        }\n\n        // Check for memory alerts\n        this.checkMemoryAlerts(memoryUsage);\n      }\n    }, 1000);\n  }\n\n  private getCurrentMemoryUsage(): number {\n    // @ts-expect-error - performance.memory might not be available\n    if (typeof performance !== 'undefined' && performance.memory) {\n      // @ts-expect-error - performance.memory is not in TypeScript lib but exists in Chrome\n      return performance.memory.usedJSHeapSize;\n    }\n    return 0;\n  }\n\n  private checkMemoryAlerts(currentUsage: number): void {\n    const memoryLimit = 50 * 1024 * 1024; // 50MB threshold\n    const criticalLimit = 100 * 1024 * 1024; // 100MB critical threshold\n\n    if (currentUsage > criticalLimit) {\n      this.createAlert('memory-usage', criticalLimit, currentUsage, 'critical', \n        'Critical memory usage detected. Consider refreshing the page or using smaller files.');\n    } else if (currentUsage > memoryLimit) {\n      this.createAlert('memory-usage', memoryLimit, currentUsage, 'warning',\n        'High memory usage detected. Close other tabs or use smaller files for better performance.');\n    }\n  }\n\n  private createAlert(\n    metric: string, \n    threshold: number, \n    actualValue: number, \n    severity: 'warning' | 'critical',\n    suggestion: string\n  ): void {\n    const alert: PerformanceAlert = {\n      id: `alert-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date(),\n      metric,\n      threshold,\n      actualValue,\n      severity,\n      suggestion\n    };\n\n    this.alerts.push(alert);\n\n    // Keep only last 50 alerts\n    if (this.alerts.length > 50) {\n      this.alerts = this.alerts.slice(-50);\n    }\n  }\n\n  private recordSystemMetric(name: string, startTime: number, metadata?: Record<string, any>): void {\n    const metric: PerformanceMetric = {\n      id: `system-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      name,\n      startTime,\n      endTime: performance.now(),\n      duration: performance.now() - startTime,\n      metadata,\n      tags: ['system'],\n      category: PerformanceCategory.RENDERING\n    };\n\n    this.metrics.push(metric);\n    this.trimMetrics();\n  }\n\n  public startTiming(\n    name: string, \n    category: PerformanceCategory, \n    metadata?: Record<string, any>,\n    tags?: string[]\n  ): string {\n    const id = `metric-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    \n    const metric: PerformanceMetric = {\n      id,\n      name,\n      startTime: performance.now(),\n      metadata,\n      tags: tags || [],\n      category\n    };\n\n    this.metrics.push(metric);\n    this.trimMetrics();\n\n    return id;\n  }\n\n  public endTiming(id: string, additionalMetadata?: Record<string, any>): PerformanceMetric | null {\n    const metric = this.metrics.find(m => m.id === id);\n    if (!metric) {\n      console.warn(`Performance metric with id ${id} not found`);\n      return null;\n    }\n\n    const endTime = performance.now();\n    metric.endTime = endTime;\n    metric.duration = endTime - metric.startTime;\n    \n    if (additionalMetadata) {\n      metric.metadata = { ...metric.metadata, ...additionalMetadata };\n    }\n\n    // Check for performance alerts\n    this.checkPerformanceAlerts(metric);\n\n    return metric;\n  }\n\n  private checkPerformanceAlerts(metric: PerformanceMetric): void {\n    if (!metric.duration) return;\n\n    const threshold = this.thresholds[metric.name];\n    if (threshold && metric.duration > threshold) {\n      const severity = metric.duration > threshold * 2 ? 'critical' : 'warning';\n      const suggestion = this.getPerformanceSuggestion(metric.name, metric.duration);\n      \n      this.createAlert(metric.name, threshold, metric.duration, severity, suggestion);\n    }\n  }\n\n  private getPerformanceSuggestion(metricName: string, duration: number): string {\n    const suggestions: Record<string, string> = {\n      'file.upload': 'Try using smaller audio files or check your internet connection.',\n      'audio.decode': 'The audio file may be large or in a complex format. Try using WAV or MP3.',\n      'analysis.total': 'Consider using shorter audio clips or try on a device with more processing power.',\n      'analysis.spectral': 'Spectral analysis is taking longer than expected. Try reducing analysis complexity.',\n      'analysis.tempo': 'Tempo detection is slow. This may be due to complex rhythm patterns.',\n      'analysis.key': 'Key detection is taking longer than expected. Try with harmonic audio content.',\n      'analysis.mfcc': 'MFCC extraction is slow. This may be due to high sample rate audio.',\n      'visualization.render': 'Visualization rendering is slow. Try reducing the visualization complexity.',\n      'export.generate': 'Export is taking longer than expected. Try exporting smaller datasets.',\n      'ui.response': 'UI responsiveness is degraded. Close other applications and browser tabs.'\n    };\n\n    return suggestions[metricName] || 'Performance is slower than expected. Try refreshing the page or using a more powerful device.';\n  }\n\n  public recordInstantMetric(\n    name: string,\n    value: number,\n    category: PerformanceCategory,\n    metadata?: Record<string, any>,\n    tags?: string[]\n  ): void {\n    const metric: PerformanceMetric = {\n      id: `instant-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      name,\n      startTime: performance.now(),\n      endTime: performance.now(),\n      duration: value,\n      metadata,\n      tags: tags || [],\n      category\n    };\n\n    this.metrics.push(metric);\n    this.trimMetrics();\n  }\n\n  public timeFunction<T>(\n    fn: () => T | Promise<T>,\n    name: string,\n    category: PerformanceCategory,\n    metadata?: Record<string, any>\n  ): T | Promise<T> {\n    const id = this.startTiming(name, category, metadata);\n    \n    try {\n      const result = fn();\n      \n      if (result instanceof Promise) {\n        return result.finally(() => {\n          this.endTiming(id);\n        });\n      } else {\n        this.endTiming(id);\n        return result;\n      }\n    } catch (error) {\n      this.endTiming(id, { error: error instanceof Error ? error.message : 'Unknown error' });\n      throw error;\n    }\n  }\n\n  private trimMetrics(): void {\n    if (this.metrics.length > this.maxMetrics) {\n      this.metrics = this.metrics.slice(-this.maxMetrics);\n    }\n  }\n\n  public getMetrics(): PerformanceMetric[] {\n    return [...this.metrics];\n  }\n\n  public getMetricsByCategory(category: PerformanceCategory): PerformanceMetric[] {\n    return this.metrics.filter(metric => metric.category === category);\n  }\n\n  public getMetricsByName(name: string): PerformanceMetric[] {\n    return this.metrics.filter(metric => metric.name === name);\n  }\n\n  public getAverageByName(name: string): number {\n    const metrics = this.getMetricsByName(name).filter(m => m.duration !== undefined);\n    if (metrics.length === 0) return 0;\n    \n    const total = metrics.reduce((sum, metric) => sum + (metric.duration || 0), 0);\n    return total / metrics.length;\n  }\n\n  public getReport(): PerformanceReport {\n    const completedMetrics = this.metrics.filter(m => m.duration !== undefined);\n    \n    const summary = {\n      totalMetrics: completedMetrics.length,\n      averageDuration: completedMetrics.length > 0 \n        ? completedMetrics.reduce((sum, m) => sum + (m.duration || 0), 0) / completedMetrics.length \n        : 0,\n      slowestOperation: completedMetrics.reduce((slowest, metric) => \n        !slowest || (metric.duration || 0) > (slowest.duration || 0) ? metric : slowest, null as PerformanceMetric | null),\n      fastestOperation: completedMetrics.reduce((fastest, metric) => \n        !fastest || (metric.duration || 0) < (fastest.duration || 0) ? metric : fastest, null as PerformanceMetric | null),\n      alerts: [...this.alerts]\n    };\n\n    const byCategory = Object.values(PerformanceCategory).reduce((acc, category) => {\n      const categoryMetrics = this.getMetricsByCategory(category).filter(m => m.duration !== undefined);\n      const totalDuration = categoryMetrics.reduce((sum, m) => sum + (m.duration || 0), 0);\n      \n      acc[category] = {\n        count: categoryMetrics.length,\n        averageDuration: categoryMetrics.length > 0 ? totalDuration / categoryMetrics.length : 0,\n        totalDuration,\n        metrics: categoryMetrics\n      };\n      \n      return acc;\n    }, {} as Record<PerformanceCategory, any>);\n\n    const memoryUsage = {\n      current: this.getCurrentMemoryUsage(),\n      peak: Math.max(...this.memorysamples.map(s => s.usage), 0),\n      samples: [...this.memorysamples]\n    };\n\n    // Get Web Vitals if available\n    const paintMetrics = this.getMetricsByName('first-contentful-paint');\n    const lcpMetrics = this.getMetricsByName('largest-contentful-paint');\n\n    return {\n      summary,\n      byCategory,\n      memoryUsage,\n      firstContentfulPaint: paintMetrics.length > 0 ? paintMetrics[0].startTime : undefined,\n      largestContentfulPaint: lcpMetrics.length > 0 ? lcpMetrics[0].startTime : undefined\n    };\n  }\n\n  public getAlerts(): PerformanceAlert[] {\n    return [...this.alerts];\n  }\n\n  public clearAlerts(): void {\n    this.alerts = [];\n  }\n\n  public clearMetrics(): void {\n    this.metrics = [];\n    this.memorysamples = [];\n  }\n\n  public setThreshold(metricName: string, threshold: number): void {\n    this.thresholds[metricName] = threshold;\n  }\n\n  public getThreshold(metricName: string): number | undefined {\n    return this.thresholds[metricName];\n  }\n\n  public exportData(): string {\n    const data = {\n      metrics: this.metrics,\n      alerts: this.alerts,\n      memorysamples: this.memorysamples,\n      thresholds: this.thresholds,\n      timestamp: new Date().toISOString(),\n      userAgent: navigator.userAgent,\n      url: window.location.href\n    };\n    \n    return JSON.stringify(data, null, 2);\n  }\n\n  public destroy(): void {\n    if (this.memoryMonitorInterval) {\n      clearInterval(this.memoryMonitorInterval);\n      this.memoryMonitorInterval = null;\n    }\n    this.clearMetrics();\n    this.clearAlerts();\n  }\n}\n\n// Singleton instance\nexport const PerformanceMonitor = new PerformanceMonitorClass();\n\n// Convenience functions\nexport const startTiming = (name: string, category: PerformanceCategory, metadata?: Record<string, any>) =>\n  PerformanceMonitor.startTiming(name, category, metadata);\n\nexport const endTiming = (id: string, metadata?: Record<string, any>) =>\n  PerformanceMonitor.endTiming(id, metadata);\n\nexport const timeFunction = <T>(fn: () => T | Promise<T>, name: string, category: PerformanceCategory, metadata?: Record<string, any>) =>\n  PerformanceMonitor.timeFunction(fn, name, category, metadata);\n\nexport const recordInstantMetric = (name: string, value: number, category: PerformanceCategory, metadata?: Record<string, any>) =>\n  PerformanceMonitor.recordInstantMetric(name, value, category, metadata);","import { useState, useCallback, useRef } from 'react';\nimport { Upload, File, AlertCircle, CheckCircle, X } from 'lucide-react';\n\ninterface FileUploadProps {\n  onFileSelect: (file: File) => void;\n  isProcessing: boolean;\n  engineReady: boolean;\n}\n\ninterface FileValidation {\n  isValid: boolean;\n  error?: string;\n  warnings?: string[];\n}\n\nexport function FileUpload({ onFileSelect, isProcessing, engineReady }: FileUploadProps) {\n  const [isDragOver, setIsDragOver] = useState(false);\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [validation, setValidation] = useState<FileValidation | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const validateFile = useCallback((file: File): FileValidation => {\n    const maxSize = 100 * 1024 * 1024; // 100MB\n    const allowedTypes = [\n      'audio/mpeg', 'audio/mp3', 'audio/wav', 'audio/wave',\n      'audio/flac', 'audio/x-flac', 'audio/aiff', 'audio/x-aiff',\n      'audio/ogg', 'audio/webm', 'audio/mp4', 'audio/aac'\n    ];\n\n    const warnings: string[] = [];\n    \n    // Check file type\n    if (!allowedTypes.includes(file.type) && !file.name.match(/\\.(mp3|wav|flac|aiff|ogg|webm|mp4|aac)$/i)) {\n      return {\n        isValid: false,\n        error: `Unsupported file type: ${file.type || 'Unknown'}. Please use MP3, WAV, FLAC, AIFF, OGG, WebM, MP4, or AAC.`\n      };\n    }\n\n    // Check file size\n    if (file.size > maxSize) {\n      return {\n        isValid: false,\n        error: `File too large: ${(file.size / 1024 / 1024).toFixed(1)}MB. Maximum size is 100MB.`\n      };\n    }\n\n    // Add warnings for various conditions\n    if (file.size > 50 * 1024 * 1024) {\n      warnings.push('Large file detected. Analysis may take longer.');\n    }\n\n    if (file.name.includes(' ')) {\n      warnings.push('Filename contains spaces. Consider using underscores.');\n    }\n\n    if (file.type.includes('compressed') || file.name.toLowerCase().includes('mp3')) {\n      warnings.push('Compressed audio detected. Lossless formats (WAV, FLAC) provide better analysis accuracy.');\n    }\n\n    return {\n      isValid: true,\n      warnings: warnings.length > 0 ? warnings : undefined\n    };\n  }, []);\n\n  const handleFile = useCallback((file: File) => {\n    const validation = validateFile(file);\n    setValidation(validation);\n    setSelectedFile(file);\n\n    if (validation.isValid) {\n      onFileSelect(file);\n    }\n  }, [validateFile, onFileSelect]);\n\n  const handleDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n\n    if (!engineReady || isProcessing) return;\n\n    const files = Array.from(e.dataTransfer.files);\n    if (files.length > 0) {\n      handleFile(files[0]);\n    }\n  }, [engineReady, isProcessing, handleFile]);\n\n  const handleDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    if (engineReady && !isProcessing) {\n      setIsDragOver(true);\n    }\n  }, [engineReady, isProcessing]);\n\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    setIsDragOver(false);\n  }, []);\n\n  const handleFileInput = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const files = e.target.files;\n    if (files && files.length > 0) {\n      handleFile(files[0]);\n    }\n  }, [handleFile]);\n\n  const clearFile = useCallback(() => {\n    setSelectedFile(null);\n    setValidation(null);\n    if (fileInputRef.current) {\n      fileInputRef.current.value = '';\n    }\n  }, []);\n\n  const getDropzoneStyle = () => {\n    const baseStyle: React.CSSProperties = {\n      borderWidth: '2px',\n      borderStyle: 'dashed',\n      borderRadius: '16px',\n      padding: '48px 32px',\n      transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',\n      cursor: 'pointer',\n      background: 'var(--studio-bg-tertiary)',\n      borderColor: 'var(--studio-border)'\n    };\n\n    if (!engineReady) {\n      return { ...baseStyle, opacity: 0.5, cursor: 'not-allowed' };\n    }\n\n    if (isProcessing) {\n      return {\n        ...baseStyle,\n        cursor: 'not-allowed',\n        borderColor: 'var(--studio-accent-blue)',\n        boxShadow: '0 0 20px rgba(74, 158, 255, 0.2)'\n      };\n    }\n\n    if (isDragOver) {\n      return {\n        ...baseStyle,\n        transform: 'scale(1.02)',\n        borderColor: 'var(--studio-accent-gold)',\n        background: 'var(--studio-bg-elevated)',\n        boxShadow: 'var(--studio-shadow-glow)'\n      };\n    }\n\n    if (selectedFile && validation?.isValid) {\n      return {\n        ...baseStyle,\n        borderColor: 'var(--studio-success)',\n        background: 'rgba(16, 185, 129, 0.05)'\n      };\n    }\n\n    if (validation && !validation.isValid) {\n      return {\n        ...baseStyle,\n        borderColor: 'var(--studio-error)',\n        background: 'rgba(239, 68, 68, 0.05)'\n      };\n    }\n\n    return baseStyle;\n  };\n\n  const formatFileSize = (bytes: number): string => {\n    if (bytes < 1024) return `${bytes} B`;\n    if (bytes < 1024 * 1024) return `${(bytes / 1024).toFixed(1)} KB`;\n    return `${(bytes / 1024 / 1024).toFixed(1)} MB`;\n  };\n\n  const getStatusMessage = () => {\n    if (!engineReady) return \"‚è≥ Waiting for analysis engine...\";\n    if (isProcessing) return \"üî¨ Analysis in progress...\";\n    if (selectedFile && validation?.isValid) return \"‚úÖ File ready for analysis\";\n    if (validation && !validation.isValid) return \"‚ùå File validation failed\";\n    return \"üéµ Drop audio files or click to browse\";\n  };\n\n  return (\n    <div style={{ display: 'flex', flexDirection: 'column', gap: '24px' }}>\n      <div\n        style={getDropzoneStyle()}\n        onDrop={handleDrop}\n        onDragOver={handleDragOver}\n        onDragLeave={handleDragLeave}\n        onClick={() => engineReady && !isProcessing && fileInputRef.current?.click()}\n      >\n        <div style={{ textAlign: 'center' }}>\n          <div style={{ marginBottom: '24px' }}>\n            {isProcessing ? (\n              <div className=\"studio-pulse\" style={{ width: '64px', height: '64px', margin: '0 auto' }}>\n                <div style={{\n                  width: '64px',\n                  height: '64px',\n                  border: '4px solid var(--studio-accent-blue)',\n                  borderTop: '4px solid transparent',\n                  borderRadius: '50%',\n                  animation: 'spin 1s linear infinite'\n                }}></div>\n              </div>\n            ) : selectedFile && validation?.isValid ? (\n              <CheckCircle className=\"studio-glow\" style={{\n                width: '64px',\n                height: '64px',\n                color: 'var(--studio-success)',\n                margin: '0 auto'\n              }} />\n            ) : validation && !validation.isValid ? (\n              <AlertCircle style={{\n                width: '64px',\n                height: '64px',\n                color: 'var(--studio-error)',\n                margin: '0 auto'\n              }} />\n            ) : (\n              <Upload style={{\n                width: '64px',\n                height: '64px',\n                color: 'var(--studio-accent-gold)',\n                margin: '0 auto',\n                opacity: 0.7\n              }} />\n            )}\n          </div>\n\n          <p className=\"studio-header\" style={{ fontSize: '20px', marginBottom: '8px' }}>\n            {getStatusMessage()}\n          </p>\n\n          <p className=\"studio-subheader\" style={{ fontSize: '13px', marginTop: '8px' }}>\n            {!engineReady ? (\n              \"Engine initialization required\"\n            ) : isProcessing ? (\n              \"Please wait for current analysis to complete\"\n            ) : (\n              \"Supports MP3, WAV, FLAC, AIFF, OGG, WebM, MP4, AAC up to 100MB\"\n            )}\n          </p>\n        </div>\n\n        <input\n          ref={fileInputRef}\n          type=\"file\"\n          accept=\"audio/*,.mp3,.wav,.flac,.aiff,.ogg,.webm,.mp4,.aac\"\n          onChange={handleFileInput}\n          style={{ display: 'none' }}\n          disabled={!engineReady || isProcessing}\n        />\n      </div>\n\n      {/* File Details */}\n      {selectedFile && (\n        <div className=\"studio-card\" style={{ padding: '20px' }}>\n          <div style={{ display: 'flex', alignItems: 'flex-start', justifyContent: 'space-between' }}>\n            <div style={{ display: 'flex', alignItems: 'center', gap: '12px', flex: 1 }}>\n              <File style={{\n                width: '20px',\n                height: '20px',\n                flexShrink: 0,\n                color: 'var(--studio-accent-blue)'\n              }} />\n              <div style={{ minWidth: 0, flex: 1 }}>\n                <p style={{\n                  fontWeight: 500,\n                  overflow: 'hidden',\n                  textOverflow: 'ellipsis',\n                  whiteSpace: 'nowrap',\n                  color: 'var(--studio-text-primary)'\n                }}>\n                  {selectedFile.name}\n                </p>\n                <p style={{ fontSize: '13px', color: 'var(--studio-text-tertiary)', marginTop: '4px' }}>\n                  {formatFileSize(selectedFile.size)} ‚Ä¢ {selectedFile.type || 'Unknown type'}\n                </p>\n              </div>\n            </div>\n            <button\n              onClick={clearFile}\n              disabled={isProcessing}\n              style={{\n                padding: '8px',\n                borderRadius: '8px',\n                border: 'none',\n                background: 'transparent',\n                color: 'var(--studio-text-secondary)',\n                cursor: isProcessing ? 'not-allowed' : 'pointer',\n                transition: 'all 0.2s ease'\n              }}\n              onMouseEnter={(e) => {\n                if (!isProcessing) {\n                  e.currentTarget.style.background = 'rgba(239, 68, 68, 0.2)';\n                  e.currentTarget.style.color = 'var(--studio-error)';\n                }\n              }}\n              onMouseLeave={(e) => {\n                e.currentTarget.style.background = 'transparent';\n                e.currentTarget.style.color = 'var(--studio-text-secondary)';\n              }}\n            >\n              <X style={{ width: '16px', height: '16px' }} />\n            </button>\n          </div>\n\n          {/* Validation Messages */}\n          {validation && (\n            <div style={{ marginTop: '16px', display: 'flex', flexDirection: 'column', gap: '8px' }}>\n              {!validation.isValid && validation.error && (\n                <div style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '13px', color: 'var(--studio-error)' }}>\n                  <AlertCircle style={{ width: '16px', height: '16px', flexShrink: 0 }} />\n                  <span>{validation.error}</span>\n                </div>\n              )}\n\n              {validation.warnings && validation.warnings.map((warning, idx) => (\n                <div key={idx} style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '13px', color: 'var(--studio-warning)' }}>\n                  <AlertCircle style={{ width: '16px', height: '16px', flexShrink: 0 }} />\n                  <span>{warning}</span>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      )}\n\n      {/* Upload Statistics */}\n      <div className=\"studio-card\" style={{ padding: '20px' }}>\n        <div className=\"studio-grid studio-grid-3\" style={{ gap: '24px', textAlign: 'center' }}>\n          <div className=\"studio-metric\">\n            <div className=\"studio-metric-label\">Max Size</div>\n            <div className=\"studio-metric-value\" style={{ fontSize: '20px' }}>100MB</div>\n          </div>\n          <div className=\"studio-metric\">\n            <div className=\"studio-metric-label\">Formats</div>\n            <div className=\"studio-metric-value\" style={{ fontSize: '20px' }}>8 Types</div>\n          </div>\n          <div className=\"studio-metric\">\n            <div className=\"studio-metric-label\">Quality</div>\n            <div className=\"studio-metric-value\" style={{ fontSize: '20px' }}>Any SR</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useRef, useEffect } from 'react';\nimport { Music, Activity, BarChart3, Waves, Download, Eye, EyeOff } from 'lucide-react';\n// Temporarily disable VisualizationEngine import to fix build\n// import { VisualizationEngine, type VisualizationOptions } from '../engines/VisualizationEngine';\nimport type { AudioAnalysisResult } from '../types/audio';\n\ninterface AnalysisResultsProps {\n  analysisData: AudioAnalysisResult | null;\n  isAnalyzing: boolean;\n}\n\ninterface VisualizationTab {\n  id: string;\n  name: string;\n  icon: React.ReactNode;\n  description: string;\n}\n\nexport function AnalysisResults({ analysisData, isAnalyzing }: AnalysisResultsProps) {\n  const [activeTab, setActiveTab] = useState('spectral');\n  const [showGrid, setShowGrid] = useState(true);\n  const [showLabels, setShowLabels] = useState(true);\n  const [isAnimated, setIsAnimated] = useState(false);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  // const engineRef = useRef<VisualizationEngine | null>(null);\n\n  const tabs: VisualizationTab[] = [\n    {\n      id: 'spectral',\n      name: 'Spectral',\n      icon: <BarChart3 className=\"w-4 h-4\" />,\n      description: 'Frequency domain analysis'\n    },\n    {\n      id: 'mfcc',\n      name: 'MFCC',\n      icon: <Waves className=\"w-4 h-4\" />,\n      description: 'Mel-frequency cepstral coefficients'\n    },\n    {\n      id: 'tempo',\n      name: 'Tempo',\n      icon: <Activity className=\"w-4 h-4\" />,\n      description: 'Rhythm and beat analysis'\n    },\n    {\n      id: 'key',\n      name: 'Key',\n      icon: <Music className=\"w-4 h-4\" />,\n      description: 'Musical key detection'\n    }\n  ];\n\n  // Temporarily disable visualization engine\n  // useEffect(() => {\n  //   if (canvasRef.current && !engineRef.current) {\n  //     try {\n  //       engineRef.current = new VisualizationEngine(canvasRef.current);\n  //     } catch (error) {\n  //       console.error('Failed to initialize visualization engine:', error);\n  //     }\n  //   }\n\n  //   return () => {\n  //     if (engineRef.current) {\n  //       engineRef.current.destroy();\n  //       engineRef.current = null;\n  //     }\n  //   };\n  // }, []);\n\n  // Temporarily disable visualization updates\n  // useEffect(() => {\n  //   if (!engineRef.current || !analysisData || isAnalyzing) return;\n\n  //   const options: VisualizationOptions = {\n  //     width: 800,\n  //     height: 400,\n  //     theme: 'dark',\n  //     animated: isAnimated,\n  //     showGrid,\n  //     showLabels\n  //   };\n\n  //   try {\n  //     switch (activeTab) {\n  //       case 'spectral':\n  //         if (analysisData.spectral) {\n  //           engineRef.current.renderSpectralAnalysis(analysisData.spectral, options);\n  //         }\n  //         break;\n  //       case 'mfcc':\n  //         if (analysisData.mfcc) {\n  //           engineRef.current.renderMFCCHeatmap(analysisData.mfcc, options);\n  //         }\n  //         break;\n  //       case 'tempo':\n  //         if (analysisData.tempo) {\n  //           engineRef.current.renderTempoVisualization(analysisData.tempo, options);\n  //         }\n  //         break;\n  //       case 'key':\n  //         if (analysisData.key) {\n  //           engineRef.current.renderKeyVisualization(analysisData.key, options);\n  //         }\n  //         break;\n  //     }\n  //   } catch (error) {\n  //     console.error('Visualization render error:', error);\n  //   }\n  // }, [analysisData, activeTab, showGrid, showLabels, isAnimated, isAnalyzing]);\n\n  // Temporarily disable canvas resize\n  // useEffect(() => {\n  //   const handleResize = () => {\n  //     if (engineRef.current) {\n  //       engineRef.current.resize();\n  //     }\n  //   };\n\n  //   window.addEventListener('resize', handleResize);\n  //   return () => window.removeEventListener('resize', handleResize);\n  // }, []);\n\n  const exportVisualization = () => {\n    if (!canvasRef.current) return;\n    \n    const link = document.createElement('a');\n    link.download = `harmonix-${activeTab}-analysis.png`;\n    link.href = canvasRef.current.toDataURL();\n    link.click();\n  };\n\n  const getAnalysisOverview = () => {\n    if (!analysisData) return null;\n\n    const stats = [];\n    \n    if (analysisData.tempo?.bpm) {\n      stats.push({ label: 'Tempo', value: `${analysisData.tempo.bpm} BPM`, color: 'text-blue-400' });\n    }\n    \n    if (analysisData.key?.key) {\n      stats.push({ label: 'Key', value: analysisData.key.key, color: 'text-green-400' });\n    }\n    \n    if (analysisData.spectral?.centroid?.mean) {\n      stats.push({ \n        label: 'Brightness', \n        value: `${(analysisData.spectral.centroid.mean / 1000).toFixed(1)}k Hz`, \n        color: 'text-yellow-400' \n      });\n    }\n    \n    if (analysisData.duration) {\n      const minutes = Math.floor(analysisData.duration / 60);\n      const seconds = Math.floor(analysisData.duration % 60);\n      stats.push({ \n        label: 'Duration', \n        value: `${minutes}:${seconds.toString().padStart(2, '0')}`, \n        color: 'text-purple-400' \n      });\n    }\n\n    return stats;\n  };\n\n  if (isAnalyzing) {\n    return (\n      <div className=\"glassmorphic-card p-8\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 mx-auto mb-4\">\n            <div className=\"w-16 h-16 border-4 border-blue-400 border-t-transparent rounded-full animate-spin\"></div>\n          </div>\n          <h3 className=\"text-xl font-semibold text-white mb-2\">Analyzing Audio</h3>\n          <p className=\"text-white/60\">Extracting features and generating insights...</p>\n        </div>\n      </div>\n    );\n  }\n\n  if (!analysisData) {\n    return (\n      <div className=\"glassmorphic-card p-8\">\n        <div className=\"text-center text-white/60\">\n          <Music className=\"w-16 h-16 mx-auto mb-4 text-white/40\" />\n          <h3 className=\"text-xl font-semibold mb-2\">No Analysis Data</h3>\n          <p>Upload and analyze an audio file to see results here.</p>\n        </div>\n      </div>\n    );\n  }\n\n  const stats = getAnalysisOverview();\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Analysis Overview */}\n      {stats && stats.length > 0 && (\n        <div className=\"glassmorphic-card p-6\">\n          <h3 className=\"text-lg font-semibold text-white mb-4\">Analysis Overview</h3>\n          <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n            {stats.map((stat, idx) => (\n              <div key={idx} className=\"text-center\">\n                <div className=\"text-white/60 text-sm mb-1\">{stat.label}</div>\n                <div className={`font-semibold text-lg ${stat.color}`}>{stat.value}</div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Visualization Controls */}\n      <div className=\"glassmorphic-card p-6\">\n        <div className=\"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4\">\n          {/* Tab Navigation */}\n          <div className=\"flex flex-wrap gap-2\">\n            {tabs.map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`glassmorphic-button px-4 py-2 flex items-center space-x-2 transition-all ${\n                  activeTab === tab.id\n                    ? 'bg-blue-500/20 border-blue-400/50 text-blue-300'\n                    : 'hover:bg-white/5'\n                }`}\n                title={tab.description}\n              >\n                {tab.icon}\n                <span className=\"font-medium\">{tab.name}</span>\n              </button>\n            ))}\n          </div>\n\n          {/* Visualization Settings */}\n          <div className=\"flex items-center space-x-4\">\n            <button\n              onClick={() => setShowGrid(!showGrid)}\n              className={`glassmorphic-button p-2 transition-colors ${\n                showGrid ? 'text-green-400' : 'text-white/60'\n              }`}\n              title=\"Toggle grid\"\n            >\n              {showGrid ? <Eye className=\"w-4 h-4\" /> : <EyeOff className=\"w-4 h-4\" />}\n            </button>\n            \n            <button\n              onClick={() => setShowLabels(!showLabels)}\n              className={`glassmorphic-button p-2 transition-colors ${\n                showLabels ? 'text-green-400' : 'text-white/60'\n              }`}\n              title=\"Toggle labels\"\n            >\n              <span className=\"text-sm font-medium\">Aa</span>\n            </button>\n\n            <button\n              onClick={exportVisualization}\n              className=\"glassmorphic-button p-2 hover:bg-blue-500/20 transition-colors\"\n              title=\"Export visualization\"\n            >\n              <Download className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Visualization */}\n      <div className=\"glassmorphic-card p-6\">\n        <div className=\"mb-4\">\n          <h3 className=\"text-lg font-semibold text-white flex items-center space-x-2\">\n            {tabs.find(t => t.id === activeTab)?.icon}\n            <span>{tabs.find(t => t.id === activeTab)?.name} Analysis</span>\n          </h3>\n          <p className=\"text-white/60 text-sm\">\n            {tabs.find(t => t.id === activeTab)?.description}\n          </p>\n        </div>\n\n        <div className=\"bg-black/20 rounded-lg p-4 overflow-hidden\">\n          <canvas\n            ref={canvasRef}\n            className=\"w-full h-96 max-w-full\"\n            style={{ imageRendering: 'pixelated' }}\n          />\n        </div>\n\n        {/* Detailed Statistics */}\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm\">\n          {activeTab === 'spectral' && analysisData.spectral && (\n            <>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Spectral Centroid</div>\n                <div className=\"text-white font-medium\">\n                  {analysisData.spectral.centroid?.mean?.toFixed(1) || 'N/A'} Hz\n                </div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Spectral Rolloff</div>\n                <div className=\"text-white font-medium\">\n                  {analysisData.spectral.rolloff?.mean?.toFixed(1) || 'N/A'} Hz\n                </div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Brightness</div>\n                <div className=\"text-white font-medium\">\n                  {((analysisData.spectral.brightness?.mean || 0) * 100).toFixed(1)}%\n                </div>\n              </div>\n            </>\n          )}\n\n          {activeTab === 'tempo' && analysisData.tempo && (\n            <>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">BPM</div>\n                <div className=\"text-white font-medium\">{analysisData.tempo.bpm}</div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Confidence</div>\n                <div className=\"text-white font-medium\">\n                  {((analysisData.tempo.confidence || 0) * 100).toFixed(1)}%\n                </div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Beats Detected</div>\n                <div className=\"text-white font-medium\">\n                  {analysisData.tempo.beats?.length || 0}\n                </div>\n              </div>\n            </>\n          )}\n\n          {activeTab === 'key' && analysisData.key && (\n            <>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Detected Key</div>\n                <div className=\"text-white font-medium\">{analysisData.key.key || 'Unknown'}</div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Scale</div>\n                <div className=\"text-white font-medium\">{analysisData.key.scale || 'Unknown'}</div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Confidence</div>\n                <div className=\"text-white font-medium\">\n                  {((analysisData.key.confidence || 0) * 100).toFixed(1)}%\n                </div>\n              </div>\n            </>\n          )}\n\n          {activeTab === 'mfcc' && analysisData.mfcc && (\n            <>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Coefficients</div>\n                <div className=\"text-white font-medium\">{analysisData.mfcc.length}</div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Range</div>\n                <div className=\"text-white font-medium\">\n                  {Math.min(...analysisData.mfcc).toFixed(2)} to {Math.max(...analysisData.mfcc).toFixed(2)}\n                </div>\n              </div>\n              <div className=\"bg-white/5 rounded-lg p-3\">\n                <div className=\"text-white/60 mb-1\">Mean Energy</div>\n                <div className=\"text-white font-medium\">\n                  {(analysisData.mfcc.reduce((a, b) => a + b, 0) / analysisData.mfcc.length).toFixed(3)}\n                </div>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}","import { VisualizationEngine, type VisualizationOptions } from './VisualizationEngine';\nimport type { AudioAnalysisResult } from '../types/audio';\nimport { PerformanceMonitor, PerformanceCategory } from '../utils/PerformanceMonitor';\n\nexport interface RealtimeVisualizationConfig {\n  fps: number;\n  smoothing: number;\n  sensitivity: number;\n  showWaveform: boolean;\n  showSpectrum: boolean;\n  showBeats: boolean;\n  colorScheme: 'default' | 'neon' | 'warm' | 'cool';\n  beatSensitivity: number;\n  spectralRange: [number, number]; // Hz range for spectral display\n}\n\nexport interface AudioVisualizationData {\n  waveform: Float32Array;\n  spectrum: Float32Array;\n  currentTime: number;\n  beatDetected: boolean;\n  rms: number;\n  peak: number;\n  currentBeat?: number;\n  nextBeat?: number;\n}\n\nexport class RealtimeVisualizationEngine {\n  protected canvas: HTMLCanvasElement;\n  protected ctx: CanvasRenderingContext2D;\n  private audioContext: AudioContext | null = null;\n  private analyser: AnalyserNode | null = null;\n  private sourceNode: MediaElementAudioSourceNode | null = null;\n  private realtimeAnimationId: number | null = null;\n  private isRunning = false;\n  \n  private config: RealtimeVisualizationConfig = {\n    fps: 60,\n    smoothing: 0.8,\n    sensitivity: 1.0,\n    showWaveform: true,\n    showSpectrum: true,\n    showBeats: true,\n    colorScheme: 'default',\n    beatSensitivity: 0.7,\n    spectralRange: [20, 20000]\n  };\n  \n  private analysisData: AudioAnalysisResult | null = null;\n  private beatTracker: BeatTracker;\n  private spectralHistory: Float32Array[] = [];\n  private maxHistoryLength = 300; // 5 seconds at 60fps\n  \n  private visualizationCallbacks: Array<(data: AudioVisualizationData) => void> = [];\n\n  constructor(canvas: HTMLCanvasElement, config?: Partial<RealtimeVisualizationConfig>) {\n    this.canvas = canvas;\n    const context = canvas.getContext('2d');\n    if (!context) {\n      throw new Error('Unable to get 2D rendering context');\n    }\n    this.ctx = context;\n    \n    if (config) {\n      this.config = { ...this.config, ...config };\n    }\n    \n    this.beatTracker = new BeatTracker(this.config.beatSensitivity);\n    this.setupAudioContext();\n  }\n\n  private async setupAudioContext(): Promise<void> {\n    try {\n      this.audioContext = new (window.AudioContext || (window as any).webkitAudioContext)();\n      \n      // Create analyser node\n      this.analyser = this.audioContext.createAnalyser();\n      this.analyser.fftSize = 2048;\n      this.analyser.smoothingTimeConstant = this.config.smoothing;\n      this.analyser.minDecibels = -90;\n      this.analyser.maxDecibels = -10;\n      \n    } catch (error) {\n      console.error('Failed to create audio context:', error);\n    }\n  }\n\n  public async connectAudioElement(audioElement: HTMLAudioElement): Promise<void> {\n    if (!this.audioContext || !this.analyser) {\n      throw new Error('Audio context not initialized');\n    }\n\n    try {\n      // Resume audio context if suspended\n      if (this.audioContext.state === 'suspended') {\n        await this.audioContext.resume();\n      }\n\n      // Disconnect previous source\n      if (this.sourceNode) {\n        this.sourceNode.disconnect();\n      }\n\n      // Create new source node\n      this.sourceNode = this.audioContext.createMediaElementSource(audioElement);\n      \n      // Connect audio graph: source -> analyser -> destination\n      this.sourceNode.connect(this.analyser);\n      this.analyser.connect(this.audioContext.destination);\n      \n    } catch (error) {\n      console.error('Failed to connect audio element:', error);\n      throw error;\n    }\n  }\n\n  public setAnalysisData(data: AudioAnalysisResult): void {\n    this.analysisData = data;\n    \n    // Update beat tracker with tempo information\n    if (data.tempo) {\n      this.beatTracker.setTempo(data.tempo.bpm, data.tempo.beats);\n    }\n  }\n\n  public updateConfig(newConfig: Partial<RealtimeVisualizationConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n    \n    if (this.analyser) {\n      this.analyser.smoothingTimeConstant = this.config.smoothing;\n    }\n    \n    this.beatTracker.setSensitivity(this.config.beatSensitivity);\n  }\n\n  public startVisualization(audioElement: HTMLAudioElement): void {\n    if (this.isRunning) return;\n\n    this.connectAudioElement(audioElement).then(() => {\n      this.isRunning = true;\n      this.animate();\n    }).catch(error => {\n      console.error('Failed to start visualization:', error);\n    });\n  }\n\n  public stopVisualization(): void {\n    this.isRunning = false;\n    \n    if (this.realtimeAnimationId) {\n      cancelAnimationFrame(this.realtimeAnimationId);\n      this.realtimeAnimationId = null;\n    }\n  }\n\n  private animate(): void {\n    if (!this.isRunning || !this.analyser) return;\n\n    const timingId = PerformanceMonitor.startTiming(\n      'realtime.visualization.frame',\n      PerformanceCategory.VISUALIZATION,\n      { fps: this.config.fps }\n    );\n\n    try {\n      // Get audio data\n      const bufferLength = this.analyser.frequencyBinCount;\n      const waveformData = new Float32Array(bufferLength);\n      const spectrumData = new Uint8Array(bufferLength);\n      \n      this.analyser.getFloatTimeDomainData(waveformData);\n      this.analyser.getByteFrequencyData(spectrumData);\n      \n      // Convert spectrum to Float32Array and normalize\n      const spectrum = new Float32Array(spectrumData.length);\n      for (let i = 0; i < spectrumData.length; i++) {\n        spectrum[i] = spectrumData[i] / 255.0;\n      }\n      \n      // Store spectral history for advanced visualizations\n      this.spectralHistory.push(new Float32Array(spectrum));\n      if (this.spectralHistory.length > this.maxHistoryLength) {\n        this.spectralHistory.shift();\n      }\n      \n      // Calculate audio features\n      const rms = this.calculateRMS(waveformData);\n      const peak = Math.max(...Array.from(waveformData).map(Math.abs));\n      \n      // Beat detection\n      const beatDetected = this.beatTracker.detectBeat(spectrum, rms);\n      const currentTime = this.audioContext?.currentTime || 0;\n      \n      // Create visualization data\n      const visualizationData: AudioVisualizationData = {\n        waveform: waveformData,\n        spectrum,\n        currentTime,\n        beatDetected,\n        rms,\n        peak,\n        currentBeat: this.beatTracker.getCurrentBeat(),\n        nextBeat: this.beatTracker.getNextBeat()\n      };\n      \n      // Render visualizations\n      this.renderRealtimeVisualization(visualizationData);\n      \n      // Notify callbacks\n      this.visualizationCallbacks.forEach(callback => {\n        try {\n          callback(visualizationData);\n        } catch (error) {\n          console.error('Visualization callback error:', error);\n        }\n      });\n      \n    } catch (error) {\n      console.error('Animation frame error:', error);\n    } finally {\n      PerformanceMonitor.endTiming(timingId);\n    }\n\n    // Schedule next frame\n    this.realtimeAnimationId = requestAnimationFrame(() => this.animate());\n  }\n\n  private renderRealtimeVisualization(data: AudioVisualizationData): void {\n    this.clearCanvas();\n    \n    const { width, height } = this.getCanvasSize();\n    const ctx = this.getContext();\n    \n    // Background with beat pulse\n    if (data.beatDetected) {\n      const pulse = 0.1;\n      ctx.fillStyle = `rgba(59, 130, 246, ${pulse})`;\n      ctx.fillRect(0, 0, width, height);\n    }\n    \n    if (this.config.showWaveform) {\n      this.renderWaveform(data.waveform, { width, height });\n    }\n    \n    if (this.config.showSpectrum) {\n      this.renderSpectrum(data.spectrum, { width, height });\n    }\n    \n    if (this.config.showBeats && this.analysisData?.tempo?.beats) {\n      this.renderBeatIndicators(data, { width, height });\n    }\n    \n    // Render additional info\n    this.renderAudioInfo(data, { width, height });\n  }\n\n  private renderWaveform(waveform: Float32Array, dimensions: { width: number; height: number }): void {\n    const ctx = this.getContext();\n    const { width, height } = dimensions;\n    \n    ctx.strokeStyle = this.getColor('waveform');\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    \n    const sliceWidth = width / waveform.length;\n    let x = 0;\n    \n    for (let i = 0; i < waveform.length; i++) {\n      const v = waveform[i] * 0.5;\n      const y = (v + 1) * height / 4 + height * 0.1; // Top quarter\n      \n      if (i === 0) {\n        ctx.moveTo(x, y);\n      } else {\n        ctx.lineTo(x, y);\n      }\n      \n      x += sliceWidth;\n    }\n    \n    ctx.stroke();\n  }\n\n  private renderSpectrum(spectrum: Float32Array, dimensions: { width: number; height: number }): void {\n    const ctx = this.getContext();\n    const { width, height } = dimensions;\n    \n    const startY = height * 0.4; // Start below waveform\n    const spectrumHeight = height * 0.5;\n    const barWidth = width / spectrum.length;\n    \n    // Create gradient\n    const gradient = ctx.createLinearGradient(0, startY, 0, startY + spectrumHeight);\n    gradient.addColorStop(0, this.getColor('spectrum-high'));\n    gradient.addColorStop(0.5, this.getColor('spectrum-mid'));\n    gradient.addColorStop(1, this.getColor('spectrum-low'));\n    \n    ctx.fillStyle = gradient;\n    \n    for (let i = 0; i < spectrum.length; i++) {\n      const barHeight = spectrum[i] * spectrumHeight;\n      const x = i * barWidth;\n      const y = startY + spectrumHeight - barHeight;\n      \n      ctx.fillRect(x, y, barWidth - 1, barHeight);\n    }\n  }\n\n  private renderBeatIndicators(data: AudioVisualizationData, dimensions: { width: number; height: number }): void {\n    const ctx = this.getContext();\n    const { width, height } = dimensions;\n    \n    // Beat pulse circle\n    if (data.beatDetected) {\n      const centerX = width - 60;\n      const centerY = 60;\n      const radius = 20;\n      \n      ctx.fillStyle = this.getColor('beat-active');\n      ctx.beginPath();\n      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      ctx.fill();\n      \n      // Pulse ring\n      ctx.strokeStyle = this.getColor('beat-pulse');\n      ctx.lineWidth = 3;\n      ctx.beginPath();\n      ctx.arc(centerX, centerY, radius + 10, 0, 2 * Math.PI);\n      ctx.stroke();\n    } else {\n      // Inactive beat indicator\n      const centerX = width - 60;\n      const centerY = 60;\n      const radius = 15;\n      \n      ctx.strokeStyle = this.getColor('beat-inactive');\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);\n      ctx.stroke();\n    }\n    \n    // Beat timeline\n    if (this.analysisData?.tempo?.beats) {\n      this.renderBeatTimeline(data, dimensions);\n    }\n  }\n\n  private renderBeatTimeline(data: AudioVisualizationData, dimensions: { width: number; height: number }): void {\n    const ctx = this.getContext();\n    const { width, height } = dimensions;\n    const beats = this.analysisData?.tempo?.beats || [];\n    \n    const timelineY = height - 40;\n    const timelineWidth = width - 40;\n    const timelineStart = 20;\n    \n    // Timeline background\n    ctx.strokeStyle = this.getColor('timeline-bg');\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(timelineStart, timelineY);\n    ctx.lineTo(timelineStart + timelineWidth, timelineY);\n    ctx.stroke();\n    \n    // Beat markers\n    const currentTime = data.currentTime;\n    const visibleRange = 8; // seconds\n    const timeScale = timelineWidth / visibleRange;\n    \n    ctx.fillStyle = this.getColor('beat-marker');\n    for (const beatTime of beats) {\n      const relativeTime = beatTime - currentTime;\n      if (relativeTime >= -2 && relativeTime <= visibleRange - 2) {\n        const x = timelineStart + (relativeTime + 2) * timeScale;\n        const size = Math.abs(relativeTime) < 0.1 ? 6 : 3; // Larger for current beat\n        \n        ctx.beginPath();\n        ctx.arc(x, timelineY, size, 0, 2 * Math.PI);\n        ctx.fill();\n      }\n    }\n    \n    // Current time indicator\n    const currentX = timelineStart + 2 * timeScale;\n    ctx.strokeStyle = this.getColor('current-time');\n    ctx.lineWidth = 2;\n    ctx.beginPath();\n    ctx.moveTo(currentX, timelineY - 15);\n    ctx.lineTo(currentX, timelineY + 15);\n    ctx.stroke();\n  }\n\n  private renderAudioInfo(data: AudioVisualizationData, dimensions: { width: number; height: number }): void {\n    const ctx = this.getContext();\n    const { width } = dimensions;\n    \n    ctx.font = '14px -apple-system, BlinkMacSystemFont, sans-serif';\n    ctx.fillStyle = this.getColor('text');\n    \n    // RMS and Peak levels\n    const rmsPercent = Math.round(data.rms * 100);\n    const peakPercent = Math.round(data.peak * 100);\n    \n    ctx.fillText(`RMS: ${rmsPercent}%`, 20, 30);\n    ctx.fillText(`Peak: ${peakPercent}%`, 20, 50);\n    \n    // BPM if available\n    if (this.analysisData?.tempo?.bpm) {\n      ctx.fillText(`BPM: ${this.analysisData.tempo.bpm}`, width - 120, 30);\n    }\n    \n    // Key if available\n    if (this.analysisData?.key?.key) {\n      ctx.fillText(`Key: ${this.analysisData.key.key}`, width - 120, 50);\n    }\n  }\n\n  private getColor(element: string): string {\n    const schemes: Record<string, Record<string, string>> = {\n      default: {\n        'waveform': '#60A5FA',\n        'spectrum-high': '#F59E0B',\n        'spectrum-mid': '#10B981',\n        'spectrum-low': '#3B82F6',\n        'beat-active': '#10B981',\n        'beat-inactive': '#6B7280',\n        'beat-pulse': '#34D399',\n        'beat-marker': '#F59E0B',\n        'timeline-bg': '#374151',\n        'current-time': '#EF4444',\n        'text': '#F3F4F6'\n      },\n      neon: {\n        'waveform': '#FF00FF',\n        'spectrum-high': '#00FFFF',\n        'spectrum-mid': '#FF1493',\n        'spectrum-low': '#00FF00',\n        'beat-active': '#FF00FF',\n        'beat-inactive': '#666666',\n        'beat-pulse': '#FF69B4',\n        'beat-marker': '#00FFFF',\n        'timeline-bg': '#333333',\n        'current-time': '#FF0000',\n        'text': '#FFFFFF'\n      },\n      warm: {\n        'waveform': '#FF6B35',\n        'spectrum-high': '#F7931E',\n        'spectrum-mid': '#FFD23F',\n        'spectrum-low': '#FCAB10',\n        'beat-active': '#FF6B35',\n        'beat-inactive': '#8B4513',\n        'beat-pulse': '#FF8C42',\n        'beat-marker': '#F7931E',\n        'timeline-bg': '#8B4513',\n        'current-time': '#FF4500',\n        'text': '#FFF8DC'\n      },\n      cool: {\n        'waveform': '#00CED1',\n        'spectrum-high': '#1E90FF',\n        'spectrum-mid': '#4169E1',\n        'spectrum-low': '#0000FF',\n        'beat-active': '#00CED1',\n        'beat-inactive': '#696969',\n        'beat-pulse': '#87CEEB',\n        'beat-marker': '#1E90FF',\n        'timeline-bg': '#2F4F4F',\n        'current-time': '#FF1493',\n        'text': '#F0F8FF'\n      }\n    };\n    \n    return schemes[this.config.colorScheme]?.[element] || schemes.default[element] || '#FFFFFF';\n  }\n\n  private calculateRMS(waveform: Float32Array): number {\n    let sum = 0;\n    for (let i = 0; i < waveform.length; i++) {\n      sum += waveform[i] * waveform[i];\n    }\n    return Math.sqrt(sum / waveform.length);\n  }\n\n  private getCanvasSize(): { width: number; height: number } {\n    return {\n      width: this.canvas.width,\n      height: this.canvas.height\n    };\n  }\n\n  private getContext(): CanvasRenderingContext2D {\n    return this.ctx;\n  }\n\n  private clearCanvas(): void {\n    const { width, height } = this.getCanvasSize();\n    this.ctx.clearRect(0, 0, width, height);\n  }\n\n  // Public methods for external control\n  public onVisualizationData(callback: (data: AudioVisualizationData) => void): () => void {\n    this.visualizationCallbacks.push(callback);\n    return () => {\n      const index = this.visualizationCallbacks.indexOf(callback);\n      if (index > -1) {\n        this.visualizationCallbacks.splice(index, 1);\n      }\n    };\n  }\n\n  public getSpectralHistory(): Float32Array[] {\n    return [...this.spectralHistory];\n  }\n\n  public getCurrentAudioData(): AudioVisualizationData | null {\n    if (!this.analyser || !this.isRunning) return null;\n    \n    const bufferLength = this.analyser.frequencyBinCount;\n    const waveform = new Float32Array(bufferLength);\n    const spectrumData = new Uint8Array(bufferLength);\n    \n    this.analyser.getFloatTimeDomainData(waveform);\n    this.analyser.getByteFrequencyData(spectrumData);\n    \n    const spectrum = new Float32Array(spectrumData.length);\n    for (let i = 0; i < spectrumData.length; i++) {\n      spectrum[i] = spectrumData[i] / 255.0;\n    }\n    \n    return {\n      waveform,\n      spectrum,\n      currentTime: this.audioContext?.currentTime || 0,\n      beatDetected: false,\n      rms: this.calculateRMS(waveform),\n      peak: Math.max(...Array.from(waveform).map(Math.abs))\n    };\n  }\n\n  public destroy(): void {\n    this.stopVisualization();\n    \n    if (this.sourceNode) {\n      this.sourceNode.disconnect();\n    }\n    \n    if (this.audioContext) {\n      this.audioContext.close();\n    }\n    \n    this.visualizationCallbacks = [];\n    this.spectralHistory = [];\n  }\n}\n\n// Simple beat tracking class\nclass BeatTracker {\n  private sensitivity: number;\n  private tempo: number = 120;\n  private beats: number[] = [];\n  private lastBeatTime: number = 0;\n  private energyHistory: number[] = [];\n  private beatThreshold: number = 0.3;\n  \n  constructor(sensitivity: number = 0.7) {\n    this.sensitivity = sensitivity;\n  }\n  \n  public setTempo(bpm: number, beatTimes?: number[]): void {\n    this.tempo = bpm;\n    if (beatTimes) {\n      this.beats = [...beatTimes];\n    }\n  }\n  \n  public setSensitivity(sensitivity: number): void {\n    this.sensitivity = sensitivity;\n    this.beatThreshold = 0.1 + (1 - sensitivity) * 0.4;\n  }\n  \n  public detectBeat(spectrum: Float32Array, rms: number): boolean {\n    // Simple energy-based beat detection\n    const energy = this.calculateSpectralEnergy(spectrum);\n    this.energyHistory.push(energy);\n    \n    if (this.energyHistory.length > 43) { // ~1 second at 60fps\n      this.energyHistory.shift();\n    }\n    \n    if (this.energyHistory.length < 10) return false;\n    \n    const averageEnergy = this.energyHistory.reduce((a, b) => a + b, 0) / this.energyHistory.length;\n    const variance = this.energyHistory.reduce((sum, e) => sum + Math.pow(e - averageEnergy, 2), 0) / this.energyHistory.length;\n    const threshold = averageEnergy + this.sensitivity * Math.sqrt(variance);\n    \n    const now = performance.now();\n    const timeSinceLastBeat = now - this.lastBeatTime;\n    const minBeatInterval = (60 / this.tempo) * 1000 * 0.5; // Half beat interval minimum\n    \n    if (energy > threshold && timeSinceLastBeat > minBeatInterval) {\n      this.lastBeatTime = now;\n      return true;\n    }\n    \n    return false;\n  }\n  \n  private calculateSpectralEnergy(spectrum: Float32Array): number {\n    // Focus on lower frequencies for beat detection\n    const lowEnd = Math.floor(spectrum.length * 0.1);\n    let energy = 0;\n    \n    for (let i = 0; i < lowEnd; i++) {\n      energy += spectrum[i] * spectrum[i];\n    }\n    \n    return energy / lowEnd;\n  }\n  \n  public getCurrentBeat(): number | undefined {\n    // Find closest beat to current time\n    const currentTime = performance.now() / 1000;\n    let closest = undefined;\n    let minDistance = Infinity;\n    \n    for (let i = 0; i < this.beats.length; i++) {\n      const distance = Math.abs(this.beats[i] - currentTime);\n      if (distance < minDistance) {\n        minDistance = distance;\n        closest = i;\n      }\n    }\n    \n    return closest;\n  }\n  \n  public getNextBeat(): number | undefined {\n    const currentTime = performance.now() / 1000;\n    \n    for (const beatTime of this.beats) {\n      if (beatTime > currentTime) {\n        return beatTime;\n      }\n    }\n    \n    return undefined;\n  }\n}","import { useState, useRef, useEffect, useCallback } from 'react';\nimport { \n  Play, \n  Pause, \n  Square, \n  SkipBack, \n  SkipForward, \n  Volume2, \n  VolumeX,\n  Repeat,\n  Shuffle,\n  Activity\n} from 'lucide-react';\nimport { RealtimeVisualizationEngine, type AudioVisualizationData } from '../engines/RealtimeVisualizationEngine';\nimport type { AudioAnalysisResult } from '../types/audio';\n\ninterface TransportControlsProps {\n  audioFile: File | null;\n  isAnalyzing: boolean;\n  analysisData?: AudioAnalysisResult | null;\n  onPlaybackProgress?: (currentTime: number, duration: number) => void;\n  onPlaybackStateChange?: (isPlaying: boolean) => void;\n  enableRealtimeVisualization?: boolean;\n}\n\ninterface PlaybackState {\n  isPlaying: boolean;\n  currentTime: number;\n  duration: number;\n  volume: number;\n  isMuted: boolean;\n  isRepeat: boolean;\n  isShuffle: boolean;\n}\n\nexport function TransportControls({ \n  audioFile, \n  isAnalyzing, \n  analysisData,\n  onPlaybackProgress,\n  onPlaybackStateChange,\n  enableRealtimeVisualization = true \n}: TransportControlsProps) {\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const progressRef = useRef<HTMLDivElement>(null);\n  const visualizationCanvasRef = useRef<HTMLCanvasElement>(null);\n  const visualizationEngineRef = useRef<RealtimeVisualizationEngine | null>(null);\n  const [isDragging, setIsDragging] = useState(false);\n  const [visualizationData, setVisualizationData] = useState<AudioVisualizationData | null>(null);\n  \n  const [playbackState, setPlaybackState] = useState<PlaybackState>({\n    isPlaying: false,\n    currentTime: 0,\n    duration: 0,\n    volume: 0.8,\n    isMuted: false,\n    isRepeat: false,\n    isShuffle: false\n  });\n\n  // Initialize realtime visualization engine\n  useEffect(() => {\n    if (enableRealtimeVisualization && visualizationCanvasRef.current && !visualizationEngineRef.current) {\n      try {\n        visualizationEngineRef.current = new RealtimeVisualizationEngine(visualizationCanvasRef.current, {\n          fps: 60,\n          showWaveform: true,\n          showSpectrum: true,\n          showBeats: true,\n          colorScheme: 'default'\n        });\n\n        // Set up visualization data callback\n        const unsubscribe = visualizationEngineRef.current.onVisualizationData((data) => {\n          setVisualizationData(data);\n        });\n\n        return () => {\n          unsubscribe();\n          if (visualizationEngineRef.current) {\n            visualizationEngineRef.current.destroy();\n            visualizationEngineRef.current = null;\n          }\n        };\n      } catch (error) {\n        console.error('Failed to initialize realtime visualization:', error);\n      }\n    }\n  }, [enableRealtimeVisualization]);\n\n  // Update visualization engine with analysis data\n  useEffect(() => {\n    if (visualizationEngineRef.current && analysisData) {\n      visualizationEngineRef.current.setAnalysisData(analysisData);\n    }\n  }, [analysisData]);\n\n  // Load audio file\n  useEffect(() => {\n    if (!audioFile || !audioRef.current) return;\n\n    const audio = audioRef.current;\n    const objectUrl = URL.createObjectURL(audioFile);\n    \n    audio.src = objectUrl;\n    audio.volume = playbackState.volume;\n    \n    const handleLoadedMetadata = () => {\n      setPlaybackState(prev => ({ ...prev, duration: audio.duration }));\n    };\n\n    const handleTimeUpdate = () => {\n      if (!isDragging) {\n        setPlaybackState(prev => ({ ...prev, currentTime: audio.currentTime }));\n        onPlaybackProgress?.(audio.currentTime, audio.duration);\n      }\n    };\n\n    const handleEnded = () => {\n      if (playbackState.isRepeat) {\n        audio.currentTime = 0;\n        audio.play();\n      } else {\n        setPlaybackState(prev => ({ ...prev, isPlaying: false, currentTime: 0 }));\n        onPlaybackStateChange?.(false);\n      }\n    };\n\n    const handleError = (e: any) => {\n      console.error('Audio playback error:', e);\n      setPlaybackState(prev => ({ ...prev, isPlaying: false }));\n      onPlaybackStateChange?.(false);\n    };\n\n    audio.addEventListener('loadedmetadata', handleLoadedMetadata);\n    audio.addEventListener('timeupdate', handleTimeUpdate);\n    audio.addEventListener('ended', handleEnded);\n    audio.addEventListener('error', handleError);\n\n    return () => {\n      URL.revokeObjectURL(objectUrl);\n      audio.removeEventListener('loadedmetadata', handleLoadedMetadata);\n      audio.removeEventListener('timeupdate', handleTimeUpdate);\n      audio.removeEventListener('ended', handleEnded);\n      audio.removeEventListener('error', handleError);\n    };\n  }, [audioFile, playbackState.isRepeat, playbackState.volume, isDragging, onPlaybackProgress, onPlaybackStateChange]);\n\n  const togglePlay = useCallback(async () => {\n    if (!audioRef.current || isAnalyzing) return;\n\n    const audio = audioRef.current;\n    \n    try {\n      if (playbackState.isPlaying) {\n        audio.pause();\n        setPlaybackState(prev => ({ ...prev, isPlaying: false }));\n        onPlaybackStateChange?.(false);\n        \n        // Stop realtime visualization\n        if (visualizationEngineRef.current) {\n          visualizationEngineRef.current.stopVisualization();\n        }\n      } else {\n        await audio.play();\n        setPlaybackState(prev => ({ ...prev, isPlaying: true }));\n        onPlaybackStateChange?.(true);\n        \n        // Start realtime visualization\n        if (visualizationEngineRef.current && enableRealtimeVisualization) {\n          visualizationEngineRef.current.startVisualization(audio);\n        }\n      }\n    } catch (error) {\n      console.error('Playback error:', error);\n      setPlaybackState(prev => ({ ...prev, isPlaying: false }));\n      onPlaybackStateChange?.(false);\n      \n      // Stop visualization on error\n      if (visualizationEngineRef.current) {\n        visualizationEngineRef.current.stopVisualization();\n      }\n    }\n  }, [playbackState.isPlaying, isAnalyzing, onPlaybackStateChange, enableRealtimeVisualization]);\n\n  const stop = useCallback(() => {\n    if (!audioRef.current) return;\n\n    const audio = audioRef.current;\n    audio.pause();\n    audio.currentTime = 0;\n    setPlaybackState(prev => ({ ...prev, isPlaying: false, currentTime: 0 }));\n    onPlaybackStateChange?.(false);\n    \n    // Stop visualization\n    if (visualizationEngineRef.current) {\n      visualizationEngineRef.current.stopVisualization();\n    }\n  }, [onPlaybackStateChange]);\n\n  const seek = useCallback((time: number) => {\n    if (!audioRef.current) return;\n\n    const audio = audioRef.current;\n    audio.currentTime = Math.max(0, Math.min(time, playbackState.duration));\n    setPlaybackState(prev => ({ ...prev, currentTime: audio.currentTime }));\n  }, [playbackState.duration]);\n\n  const skipBackward = useCallback(() => {\n    seek(playbackState.currentTime - 10);\n  }, [seek, playbackState.currentTime]);\n\n  const skipForward = useCallback(() => {\n    seek(playbackState.currentTime + 10);\n  }, [seek, playbackState.currentTime]);\n\n  const toggleMute = useCallback(() => {\n    if (!audioRef.current) return;\n\n    const audio = audioRef.current;\n    const newMuted = !playbackState.isMuted;\n    \n    audio.muted = newMuted;\n    setPlaybackState(prev => ({ ...prev, isMuted: newMuted }));\n  }, [playbackState.isMuted]);\n\n  const setVolume = useCallback((volume: number) => {\n    if (!audioRef.current) return;\n\n    const audio = audioRef.current;\n    const clampedVolume = Math.max(0, Math.min(1, volume));\n    \n    audio.volume = clampedVolume;\n    audio.muted = false;\n    setPlaybackState(prev => ({ \n      ...prev, \n      volume: clampedVolume, \n      isMuted: false \n    }));\n  }, []);\n\n  const toggleRepeat = useCallback(() => {\n    setPlaybackState(prev => ({ ...prev, isRepeat: !prev.isRepeat }));\n  }, []);\n\n  const toggleShuffle = useCallback(() => {\n    setPlaybackState(prev => ({ ...prev, isShuffle: !prev.isShuffle }));\n  }, []);\n\n  // Progress bar interaction\n  const handleProgressClick = useCallback((e: React.MouseEvent) => {\n    if (!progressRef.current || playbackState.duration === 0) return;\n\n    const rect = progressRef.current.getBoundingClientRect();\n    const clickX = e.clientX - rect.left;\n    const percentage = clickX / rect.width;\n    const newTime = percentage * playbackState.duration;\n    \n    seek(newTime);\n  }, [seek, playbackState.duration]);\n\n  const handleProgressDrag = useCallback((e: React.MouseEvent) => {\n    if (!progressRef.current || playbackState.duration === 0) return;\n\n    setIsDragging(true);\n    \n    const handleMouseMove = (moveEvent: MouseEvent) => {\n      if (!progressRef.current) return;\n      \n      const rect = progressRef.current.getBoundingClientRect();\n      const dragX = Math.max(0, Math.min(moveEvent.clientX - rect.left, rect.width));\n      const percentage = dragX / rect.width;\n      const newTime = percentage * playbackState.duration;\n      \n      setPlaybackState(prev => ({ ...prev, currentTime: newTime }));\n    };\n\n    const handleMouseUp = () => {\n      setIsDragging(false);\n      if (audioRef.current) {\n        audioRef.current.currentTime = playbackState.currentTime;\n      }\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n  }, [playbackState.duration, playbackState.currentTime]);\n\n  const formatTime = (seconds: number): string => {\n    if (isNaN(seconds)) return '0:00';\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const progressPercentage = playbackState.duration > 0 \n    ? (playbackState.currentTime / playbackState.duration) * 100 \n    : 0;\n\n  const isDisabled = !audioFile || isAnalyzing;\n\n  return (\n    <div className=\"glassmorphic-card p-6 space-y-4\">\n      <audio ref={audioRef} preload=\"metadata\" />\n      \n      {/* Main Controls */}\n      <div className=\"flex items-center justify-center space-x-4\">\n        <button\n          onClick={toggleShuffle}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-2 transition-colors ${\n            playbackState.isShuffle ? 'text-blue-400' : 'text-white/60'\n          } ${isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white'}`}\n          title=\"Shuffle\"\n        >\n          <Shuffle className=\"w-5 h-5\" />\n        </button>\n\n        <button\n          onClick={skipBackward}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-3 transition-colors ${\n            isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white hover:bg-white/10'\n          }`}\n          title=\"Skip backward 10s\"\n        >\n          <SkipBack className=\"w-6 h-6\" />\n        </button>\n\n        <button\n          onClick={togglePlay}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-4 transition-all ${\n            isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:scale-105 hover:bg-blue-500/20'\n          }`}\n          title={playbackState.isPlaying ? 'Pause' : 'Play'}\n        >\n          {playbackState.isPlaying ? (\n            <Pause className=\"w-8 h-8 text-blue-400\" />\n          ) : (\n            <Play className=\"w-8 h-8 text-blue-400\" />\n          )}\n        </button>\n\n        <button\n          onClick={stop}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-3 transition-colors ${\n            isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white hover:bg-white/10'\n          }`}\n          title=\"Stop\"\n        >\n          <Square className=\"w-6 h-6\" />\n        </button>\n\n        <button\n          onClick={skipForward}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-3 transition-colors ${\n            isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white hover:bg-white/10'\n          }`}\n          title=\"Skip forward 10s\"\n        >\n          <SkipForward className=\"w-6 h-6\" />\n        </button>\n\n        <button\n          onClick={toggleRepeat}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-2 transition-colors ${\n            playbackState.isRepeat ? 'text-blue-400' : 'text-white/60'\n          } ${isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white'}`}\n          title=\"Repeat\"\n        >\n          <Repeat className=\"w-5 h-5\" />\n        </button>\n      </div>\n\n      {/* Progress Bar */}\n      <div className=\"space-y-2\">\n        <div\n          ref={progressRef}\n          className=\"relative h-2 bg-white/10 rounded-full cursor-pointer group\"\n          onClick={handleProgressClick}\n          onMouseDown={handleProgressDrag}\n        >\n          <div\n            className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-blue-500 to-blue-400 rounded-full transition-all\"\n            style={{ width: `${progressPercentage}%` }}\n          />\n          <div\n            className=\"absolute top-1/2 -translate-y-1/2 w-4 h-4 bg-blue-400 rounded-full shadow-lg opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing\"\n            style={{ left: `calc(${progressPercentage}% - 8px)` }}\n          />\n        </div>\n        \n        <div className=\"flex justify-between items-center text-sm text-white/60\">\n          <span>{formatTime(playbackState.currentTime)}</span>\n          <span>{formatTime(playbackState.duration)}</span>\n        </div>\n      </div>\n\n      {/* Volume Control */}\n      <div className=\"flex items-center justify-center space-x-3\">\n        <button\n          onClick={toggleMute}\n          disabled={isDisabled}\n          className={`glassmorphic-button p-2 transition-colors ${\n            isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:text-white'\n          }`}\n          title={playbackState.isMuted ? 'Unmute' : 'Mute'}\n        >\n          {playbackState.isMuted || playbackState.volume === 0 ? (\n            <VolumeX className=\"w-5 h-5\" />\n          ) : (\n            <Volume2 className=\"w-5 h-5\" />\n          )}\n        </button>\n\n        <div className=\"flex-1 max-w-32\">\n          <input\n            type=\"range\"\n            min=\"0\"\n            max=\"1\"\n            step=\"0.01\"\n            value={playbackState.isMuted ? 0 : playbackState.volume}\n            onChange={(e) => setVolume(parseFloat(e.target.value))}\n            disabled={isDisabled}\n            className={`w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer slider ${\n              isDisabled ? 'opacity-50 cursor-not-allowed' : ''\n            }`}\n            style={{\n              background: `linear-gradient(to right, #3B82F6 0%, #3B82F6 ${(playbackState.isMuted ? 0 : playbackState.volume) * 100}%, rgba(255,255,255,0.1) ${(playbackState.isMuted ? 0 : playbackState.volume) * 100}%, rgba(255,255,255,0.1) 100%)`\n            }}\n          />\n        </div>\n\n        <span className=\"text-xs text-white/60 min-w-[3rem] text-right\">\n          {Math.round((playbackState.isMuted ? 0 : playbackState.volume) * 100)}%\n        </span>\n      </div>\n\n      {/* Real-time Visualization */}\n      {enableRealtimeVisualization && (\n        <div className=\"border-t border-white/10 pt-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-white/70\">Real-time Analysis</span>\n            <div className=\"flex items-center space-x-2\">\n              <Activity className={`w-4 h-4 ${playbackState.isPlaying ? 'text-green-400 animate-pulse' : 'text-white/40'}`} />\n              {visualizationData && (\n                <div className=\"flex items-center space-x-3 text-xs text-white/60\">\n                  <span>RMS: {Math.round(visualizationData.rms * 100)}%</span>\n                  <span>Peak: {Math.round(visualizationData.peak * 100)}%</span>\n                  {visualizationData.beatDetected && (\n                    <span className=\"text-green-400 font-medium\">‚ô™ Beat</span>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <canvas\n            ref={visualizationCanvasRef}\n            className=\"w-full h-32 bg-black/20 rounded-lg border border-white/10\"\n            style={{ imageRendering: 'pixelated' }}\n          />\n        </div>\n      )}\n\n      {/* File Info */}\n      {audioFile && (\n        <div className=\"text-center text-sm text-white/60 border-t border-white/10 pt-4\">\n          <div className=\"font-medium text-white/80 truncate\">{audioFile.name}</div>\n          <div className=\"text-xs\">\n            {(audioFile.size / 1024 / 1024).toFixed(1)} MB ‚Ä¢ {audioFile.type || 'Unknown format'}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useCallback } from 'react';\nimport { \n  Download, \n  FileText, \n  Image, \n  Music, \n  Database,\n  ChevronDown,\n  Check,\n  Copy,\n  Share2,\n  Settings\n} from 'lucide-react';\nimport type { AudioAnalysisResult } from '../types/audio';\n\ninterface ExportFunctionalityProps {\n  analysisData: AudioAnalysisResult | null;\n  audioFile: File | null;\n  isAnalyzing: boolean;\n}\n\nexport type ExportFormat = \n  | 'json'\n  | 'csv'\n  | 'txt'\n  | 'xml'\n  | 'png'\n  | 'svg'\n  | 'pdf';\n\nexport type ExportType = \n  | 'analysis-data'\n  | 'visualization'\n  | 'summary-report'\n  | 'detailed-report'\n  | 'raw-features';\n\ninterface ExportOption {\n  type: ExportType;\n  format: ExportFormat;\n  name: string;\n  description: string;\n  icon: React.ReactNode;\n  size?: string;\n}\n\nexport function ExportFunctionality({ \n  analysisData, \n  audioFile, \n  isAnalyzing \n}: ExportFunctionalityProps) {\n  const [selectedExports, setSelectedExports] = useState<Set<string>>(new Set());\n  const [exportFormat, setExportFormat] = useState<ExportFormat>('json');\n  const [isExporting, setIsExporting] = useState(false);\n  const [showAdvanced, setShowAdvanced] = useState(false);\n\n  const exportOptions: ExportOption[] = [\n    {\n      type: 'analysis-data',\n      format: 'json',\n      name: 'Analysis Data (JSON)',\n      description: 'Complete analysis results in JSON format',\n      icon: <Database className=\"w-4 h-4\" />,\n      size: analysisData ? `${Math.round(JSON.stringify(analysisData).length / 1024)}KB` : 'N/A'\n    },\n    {\n      type: 'analysis-data',\n      format: 'csv',\n      name: 'Analysis Data (CSV)',\n      description: 'Structured data in CSV format for spreadsheets',\n      icon: <FileText className=\"w-4 h-4\" />,\n      size: 'varies'\n    },\n    {\n      type: 'summary-report',\n      format: 'txt',\n      name: 'Summary Report',\n      description: 'Human-readable analysis summary',\n      icon: <FileText className=\"w-4 h-4\" />,\n      size: '~5KB'\n    },\n    {\n      type: 'detailed-report',\n      format: 'pdf',\n      name: 'Detailed Report (PDF)',\n      description: 'Professional analysis report with visualizations',\n      icon: <FileText className=\"w-4 h-4\" />,\n      size: '~500KB'\n    },\n    {\n      type: 'visualization',\n      format: 'png',\n      name: 'Visualizations (PNG)',\n      description: 'All analysis charts as high-quality images',\n      icon: <Image className=\"w-4 h-4\" />,\n      size: '~2MB'\n    },\n    {\n      type: 'visualization',\n      format: 'svg',\n      name: 'Visualizations (SVG)',\n      description: 'Vector graphics for publications',\n      icon: <Image className=\"w-4 h-4\" />,\n      size: '~200KB'\n    }\n  ];\n\n  const formatAnalysisDataAsJSON = useCallback(() => {\n    if (!analysisData) return null;\n    \n    return JSON.stringify({\n      metadata: {\n        filename: audioFile?.name || 'unknown',\n        exportDate: new Date().toISOString(),\n        version: '1.0.0'\n      },\n      analysis: analysisData\n    }, null, 2);\n  }, [analysisData, audioFile]);\n\n  const formatAnalysisDataAsCSV = useCallback(() => {\n    if (!analysisData) return null;\n\n    const rows: string[] = [];\n    rows.push('Feature,Value,Confidence,Description');\n\n    // Tempo data\n    if (analysisData.tempo) {\n      rows.push(`Tempo,${analysisData.tempo.bpm},${analysisData.tempo.confidence || 'N/A'},Beats per minute`);\n    }\n\n    // Key data\n    if (analysisData.key) {\n      rows.push(`Musical Key,${analysisData.key.key || 'Unknown'},${analysisData.key.confidence || 'N/A'},Detected musical key`);\n      rows.push(`Musical Scale,${analysisData.key.scale || 'Unknown'},,Detected musical scale`);\n    }\n\n    // Spectral features\n    if (analysisData.spectral) {\n      Object.entries(analysisData.spectral).forEach(([feature, data]) => {\n        if (data && typeof data === 'object' && 'mean' in data) {\n          rows.push(`Spectral ${feature.charAt(0).toUpperCase() + feature.slice(1)},${data.mean},,Spectral feature analysis`);\n        }\n      });\n    }\n\n    // Duration\n    if (analysisData.duration) {\n      rows.push(`Duration,${analysisData.duration},,Track duration in seconds`);\n    }\n\n    return rows.join('\\n');\n  }, [analysisData]);\n\n  const generateSummaryReport = useCallback(() => {\n    if (!analysisData) return null;\n\n    const lines: string[] = [];\n    lines.push('HARMONIX PRO ANALYZER - ANALYSIS SUMMARY');\n    lines.push('=' .repeat(50));\n    lines.push('');\n    \n    if (audioFile) {\n      lines.push(`File: ${audioFile.name}`);\n      lines.push(`Size: ${(audioFile.size / 1024 / 1024).toFixed(2)} MB`);\n      lines.push(`Type: ${audioFile.type || 'Unknown'}`);\n      lines.push('');\n    }\n\n    lines.push('ANALYSIS RESULTS');\n    lines.push('-' .repeat(20));\n    \n    if (analysisData.tempo) {\n      lines.push(`Tempo: ${analysisData.tempo.bpm} BPM`);\n      lines.push(`Tempo Confidence: ${((analysisData.tempo.confidence || 0) * 100).toFixed(1)}%`);\n      lines.push('');\n    }\n\n    if (analysisData.key) {\n      lines.push(`Musical Key: ${analysisData.key.key || 'Unknown'}`);\n      lines.push(`Musical Scale: ${analysisData.key.scale || 'Unknown'}`);\n      lines.push(`Key Confidence: ${((analysisData.key.confidence || 0) * 100).toFixed(1)}%`);\n      lines.push('');\n    }\n\n    if (analysisData.spectral) {\n      lines.push('SPECTRAL FEATURES');\n      lines.push('-' .repeat(20));\n      Object.entries(analysisData.spectral).forEach(([feature, data]) => {\n        if (data && typeof data === 'object' && 'mean' in data) {\n          lines.push(`${feature.charAt(0).toUpperCase() + feature.slice(1)}: ${data.mean?.toFixed(2) || 'N/A'}`);\n        }\n      });\n      lines.push('');\n    }\n\n    if (analysisData.duration) {\n      const mins = Math.floor(analysisData.duration / 60);\n      const secs = Math.floor(analysisData.duration % 60);\n      lines.push(`Duration: ${mins}:${secs.toString().padStart(2, '0')}`);\n      lines.push('');\n    }\n\n    lines.push(`Generated: ${new Date().toLocaleString()}`);\n    lines.push(`Harmonix Pro Analyzer v1.0.0`);\n\n    return lines.join('\\n');\n  }, [analysisData, audioFile]);\n\n  const downloadFile = useCallback((content: string, filename: string, mimeType: string) => {\n    const blob = new Blob([content], { type: mimeType });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = filename;\n    link.click();\n    URL.revokeObjectURL(url);\n  }, []);\n\n  const handleExport = useCallback(async (option: ExportOption) => {\n    if (!analysisData || isExporting) return;\n\n    setIsExporting(true);\n    \n    try {\n      const baseFilename = audioFile?.name.replace(/\\.[^/.]+$/, '') || 'harmonix-analysis';\n      \n      switch (option.type) {\n        case 'analysis-data':\n          if (option.format === 'json') {\n            const content = formatAnalysisDataAsJSON();\n            if (content) {\n              downloadFile(content, `${baseFilename}-analysis.json`, 'application/json');\n            }\n          } else if (option.format === 'csv') {\n            const content = formatAnalysisDataAsCSV();\n            if (content) {\n              downloadFile(content, `${baseFilename}-analysis.csv`, 'text/csv');\n            }\n          }\n          break;\n\n        case 'summary-report': {\n          const summary = generateSummaryReport();\n          if (summary) {\n            downloadFile(summary, `${baseFilename}-summary.txt`, 'text/plain');\n          }\n          break;\n        }\n\n        case 'visualization':\n          // This would integrate with the VisualizationEngine\n          console.log('Visualization export not yet implemented');\n          break;\n\n        default:\n          console.warn('Export type not implemented:', option.type);\n      }\n    } catch (error) {\n      console.error('Export failed:', error);\n    } finally {\n      setIsExporting(false);\n    }\n  }, [analysisData, audioFile, isExporting, formatAnalysisDataAsJSON, formatAnalysisDataAsCSV, generateSummaryReport, downloadFile]);\n\n  const copyToClipboard = useCallback(async (content: string) => {\n    try {\n      await navigator.clipboard.writeText(content);\n      // You could show a notification here\n    } catch (error) {\n      console.error('Failed to copy to clipboard:', error);\n    }\n  }, []);\n\n  const shareAnalysis = useCallback(async () => {\n    if (!analysisData || !audioFile) return;\n\n    const shareData = {\n      title: `Music Analysis: ${audioFile.name}`,\n      text: generateSummaryReport() || 'Music analysis results from Harmonix Pro Analyzer',\n      url: window.location.href\n    };\n\n    if (navigator.share) {\n      try {\n        await navigator.share(shareData);\n      } catch (error) {\n        console.error('Share failed:', error);\n      }\n    } else {\n      // Fallback to copying URL\n      await copyToClipboard(window.location.href);\n    }\n  }, [analysisData, audioFile, generateSummaryReport, copyToClipboard]);\n\n  const isDisabled = !analysisData || isAnalyzing;\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Quick Actions */}\n      <div className=\"glassmorphic-card p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-semibold text-white\">Export Analysis</h3>\n          <div className=\"flex space-x-2\">\n            <button\n              onClick={shareAnalysis}\n              disabled={isDisabled}\n              className={`glassmorphic-button p-2 transition-colors ${\n                isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-500/20'\n              }`}\n              title=\"Share analysis\"\n            >\n              <Share2 className=\"w-4 h-4\" />\n            </button>\n            <button\n              onClick={() => setShowAdvanced(!showAdvanced)}\n              className=\"glassmorphic-button p-2 hover:bg-white/10 transition-colors\"\n              title=\"Advanced options\"\n            >\n              <Settings className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Quick Export Buttons */}\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n          {exportOptions.slice(0, 3).map((option) => (\n            <button\n              key={`${option.type}-${option.format}`}\n              onClick={() => handleExport(option)}\n              disabled={isDisabled || isExporting}\n              className={`\n                glassmorphic-button p-4 text-left transition-all\n                ${isDisabled || isExporting ? 'opacity-50 cursor-not-allowed' : 'hover:bg-white/10 hover:scale-105'}\n              `}\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"text-blue-400\">\n                  {option.icon}\n                </div>\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"font-medium text-white text-sm truncate\">\n                    {option.name}\n                  </div>\n                  <div className=\"text-white/60 text-xs\">\n                    {option.size}\n                  </div>\n                </div>\n                <Download className=\"w-4 h-4 text-white/60\" />\n              </div>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Advanced Export Options */}\n      {showAdvanced && (\n        <div className=\"glassmorphic-card p-4\">\n          <h4 className=\"text-md font-semibold text-white mb-4\">Advanced Export Options</h4>\n          \n          <div className=\"space-y-3\">\n            {exportOptions.map((option) => (\n              <div \n                key={`${option.type}-${option.format}`}\n                className=\"flex items-center justify-between p-3 rounded-lg border border-white/10 hover:bg-white/5 transition-colors\"\n              >\n                <div className=\"flex items-center space-x-3 flex-1\">\n                  <div className=\"text-blue-400\">\n                    {option.icon}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium text-white text-sm\">\n                      {option.name}\n                    </div>\n                    <div className=\"text-white/60 text-xs\">\n                      {option.description}\n                    </div>\n                  </div>\n                  <div className=\"text-white/60 text-xs\">\n                    {option.size}\n                  </div>\n                </div>\n                \n                <div className=\"flex items-center space-x-2\">\n                  {option.type === 'analysis-data' && (\n                    <button\n                      onClick={() => {\n                        const content = option.format === 'json' \n                          ? formatAnalysisDataAsJSON()\n                          : formatAnalysisDataAsCSV();\n                        if (content) copyToClipboard(content);\n                      }}\n                      disabled={isDisabled}\n                      className={`glassmorphic-button p-2 ${\n                        isDisabled ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-500/20'\n                      }`}\n                      title=\"Copy to clipboard\"\n                    >\n                      <Copy className=\"w-3 h-3\" />\n                    </button>\n                  )}\n                  \n                  <button\n                    onClick={() => handleExport(option)}\n                    disabled={isDisabled || isExporting}\n                    className={`glassmorphic-button p-2 ${\n                      isDisabled || isExporting ? 'opacity-50 cursor-not-allowed' : 'hover:bg-green-500/20'\n                    }`}\n                    title=\"Download\"\n                  >\n                    <Download className=\"w-3 h-3\" />\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Export Status */}\n      {isExporting && (\n        <div className=\"glassmorphic-card p-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full animate-spin\"></div>\n            <span className=\"text-white/80\">Preparing export...</span>\n          </div>\n        </div>\n      )}\n\n      {/* No Data Message */}\n      {!analysisData && !isAnalyzing && (\n        <div className=\"glassmorphic-card p-8 text-center\">\n          <Music className=\"w-12 h-12 text-white/40 mx-auto mb-4\" />\n          <h3 className=\"text-lg font-semibold text-white/80 mb-2\">No Analysis Data</h3>\n          <p className=\"text-white/60\">\n            Upload and analyze an audio file to enable export functionality.\n          </p>\n        </div>\n      )}\n    </div>\n  );\n}","import { useState, useEffect, useCallback, createContext, useContext } from 'react';\nimport { X, CheckCircle, AlertCircle, Info, AlertTriangle } from 'lucide-react';\n\nexport type NotificationType = 'success' | 'error' | 'warning' | 'info';\n\nexport interface Notification {\n  id: string;\n  type: NotificationType;\n  title: string;\n  message?: string;\n  duration?: number;\n  persistent?: boolean;\n  action?: {\n    label: string;\n    onClick: () => void;\n  };\n}\n\ninterface NotificationContextType {\n  notifications: Notification[];\n  addNotification: (notification: Omit<Notification, 'id'>) => string;\n  removeNotification: (id: string) => void;\n  clearAll: () => void;\n}\n\nconst NotificationContext = createContext<NotificationContextType | null>(null);\n\nexport function useNotifications() {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n}\n\ninterface NotificationProviderProps {\n  children: React.ReactNode;\n  maxNotifications?: number;\n}\n\nexport function NotificationProvider({ children, maxNotifications = 5 }: NotificationProviderProps) {\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n\n  const addNotification = useCallback((notification: Omit<Notification, 'id'>) => {\n    const id = `notification-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\n    const newNotification: Notification = {\n      ...notification,\n      id,\n      duration: notification.duration ?? (notification.type === 'error' ? 8000 : 5000)\n    };\n\n    setNotifications(prev => {\n      const updated = [newNotification, ...prev];\n      return updated.slice(0, maxNotifications);\n    });\n\n    // Auto-remove non-persistent notifications\n    if (!notification.persistent && newNotification.duration && newNotification.duration > 0) {\n      const timeoutId = setTimeout(() => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n      }, newNotification.duration);\n    }\n\n    return id;\n  }, [maxNotifications]);\n\n  const removeNotification = useCallback((id: string) => {\n    setNotifications(prev => prev.filter(notification => notification.id !== id));\n  }, []);\n\n  const clearAll = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  return (\n    <NotificationContext.Provider\n      value={{\n        notifications,\n        addNotification,\n        removeNotification,\n        clearAll\n      }}\n    >\n      {children}\n      <NotificationContainer />\n    </NotificationContext.Provider>\n  );\n}\n\nfunction NotificationContainer() {\n  const { notifications } = useNotifications();\n\n  if (notifications.length === 0) return null;\n\n  return (\n    <div className=\"fixed top-4 right-4 z-50 space-y-3 max-w-sm w-full\">\n      {notifications.map(notification => (\n        <NotificationItem key={notification.id} notification={notification} />\n      ))}\n    </div>\n  );\n}\n\ninterface NotificationItemProps {\n  notification: Notification;\n}\n\nfunction NotificationItem({ notification }: NotificationItemProps) {\n  const { removeNotification } = useNotifications();\n  const [isVisible, setIsVisible] = useState(false);\n  const [isRemoving, setIsRemoving] = useState(false);\n\n  useEffect(() => {\n    // Trigger entrance animation\n    const timer = setTimeout(() => setIsVisible(true), 10);\n    return () => clearTimeout(timer);\n  }, []);\n\n  const handleRemove = useCallback(() => {\n    setIsRemoving(true);\n    setTimeout(() => {\n      removeNotification(notification.id);\n    }, 300);\n  }, [notification.id, removeNotification]);\n\n  const getIcon = () => {\n    switch (notification.type) {\n      case 'success':\n        return <CheckCircle className=\"w-5 h-5\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5\" />;\n      case 'info':\n        return <Info className=\"w-5 h-5\" />;\n      default:\n        return <Info className=\"w-5 h-5\" />;\n    }\n  };\n\n  const getColors = () => {\n    switch (notification.type) {\n      case 'success':\n        return {\n          bg: 'bg-green-500/10 border-green-500/30',\n          text: 'text-green-400',\n          title: 'text-green-300'\n        };\n      case 'error':\n        return {\n          bg: 'bg-red-500/10 border-red-500/30',\n          text: 'text-red-400',\n          title: 'text-red-300'\n        };\n      case 'warning':\n        return {\n          bg: 'bg-yellow-500/10 border-yellow-500/30',\n          text: 'text-yellow-400',\n          title: 'text-yellow-300'\n        };\n      case 'info':\n        return {\n          bg: 'bg-blue-500/10 border-blue-500/30',\n          text: 'text-blue-400',\n          title: 'text-blue-300'\n        };\n      default:\n        return {\n          bg: 'bg-gray-500/10 border-gray-500/30',\n          text: 'text-gray-400',\n          title: 'text-gray-300'\n        };\n    }\n  };\n\n  const colors = getColors();\n\n  return (\n    <div\n      className={`\n        glassmorphic-card border-2 p-4 shadow-lg transition-all duration-300 ease-out\n        ${colors.bg}\n        ${isVisible && !isRemoving ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'}\n        ${isRemoving ? 'scale-95' : 'scale-100'}\n      `}\n    >\n      <div className=\"flex items-start space-x-3\">\n        <div className={`flex-shrink-0 ${colors.text}`}>\n          {getIcon()}\n        </div>\n        \n        <div className=\"flex-1 min-w-0\">\n          <h4 className={`font-semibold text-sm ${colors.title}`}>\n            {notification.title}\n          </h4>\n          {notification.message && (\n            <p className=\"text-white/70 text-sm mt-1 leading-relaxed\">\n              {notification.message}\n            </p>\n          )}\n          \n          {notification.action && (\n            <button\n              onClick={notification.action.onClick}\n              className={`\n                mt-2 text-xs font-medium px-3 py-1 rounded-md transition-colors\n                ${colors.text} hover:bg-white/10\n              `}\n            >\n              {notification.action.label}\n            </button>\n          )}\n        </div>\n\n        <button\n          onClick={handleRemove}\n          className=\"flex-shrink-0 text-white/60 hover:text-white/80 transition-colors p-1 rounded-md hover:bg-white/10\"\n          aria-label=\"Dismiss notification\"\n        >\n          <X className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Progress bar for timed notifications */}\n      {notification.duration && notification.duration > 0 && !notification.persistent && (\n        <div className=\"mt-3 h-1 bg-white/10 rounded-full overflow-hidden\">\n          <div\n            className={`h-full ${colors.text.replace('text-', 'bg-')} transition-all ease-linear`}\n            style={{\n              animation: `notification-progress ${notification.duration}ms linear forwards`\n            }}\n          />\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Notification helper hooks for common use cases\nexport function useNotificationHelpers() {\n  const { addNotification } = useNotifications();\n\n  return {\n    success: useCallback((title: string, message?: string, options?: Partial<Notification>) => {\n      return addNotification({ ...options, type: 'success', title, message });\n    }, [addNotification]),\n\n    error: useCallback((title: string, message?: string, options?: Partial<Notification>) => {\n      return addNotification({ ...options, type: 'error', title, message, duration: 8000 });\n    }, [addNotification]),\n\n    warning: useCallback((title: string, message?: string, options?: Partial<Notification>) => {\n      return addNotification({ ...options, type: 'warning', title, message });\n    }, [addNotification]),\n\n    info: useCallback((title: string, message?: string, options?: Partial<Notification>) => {\n      return addNotification({ ...options, type: 'info', title, message });\n    }, [addNotification]),\n\n    analysisComplete: useCallback((filename: string) => {\n      return addNotification({\n        type: 'success',\n        title: 'Analysis Complete',\n        message: `Successfully analyzed ${filename}`,\n        duration: 5000\n      });\n    }, [addNotification]),\n\n    analysisError: useCallback((filename: string, error: string) => {\n      return addNotification({\n        type: 'error',\n        title: 'Analysis Failed',\n        message: `Failed to analyze ${filename}: ${error}`,\n        duration: 10000,\n        action: {\n          label: 'Try Again',\n          onClick: () => window.location.reload()\n        }\n      });\n    }, [addNotification]),\n\n    fileUploaded: useCallback((filename: string) => {\n      return addNotification({\n        type: 'info',\n        title: 'File Uploaded',\n        message: `${filename} is ready for analysis`,\n        duration: 3000\n      });\n    }, [addNotification]),\n\n    engineReady: useCallback(() => {\n      return addNotification({\n        type: 'success',\n        title: 'Engine Ready',\n        message: 'Audio analysis engine is now ready for use',\n        duration: 4000\n      });\n    }, [addNotification]),\n\n    engineError: useCallback((error: string) => {\n      return addNotification({\n        type: 'error',\n        title: 'Engine Error',\n        message: `Analysis engine error: ${error}`,\n        persistent: true,\n        action: {\n          label: 'Reload',\n          onClick: () => window.location.reload()\n        }\n      });\n    }, [addNotification])\n  };\n}","import { useState, useEffect } from 'react';\nimport { Loader2, CheckCircle, AlertCircle, Clock, Music } from 'lucide-react';\n\nexport interface ProgressStep {\n  id: string;\n  label: string;\n  description?: string;\n  status: 'pending' | 'active' | 'completed' | 'error';\n  progress?: number; // 0-100\n  timeElapsed?: number; // seconds\n  timeRemaining?: number; // seconds\n}\n\ninterface ProgressStepperProps {\n  steps: ProgressStep[];\n  currentStep?: string;\n  orientation?: 'horizontal' | 'vertical';\n  showProgress?: boolean;\n  showTimers?: boolean;\n}\n\nexport function ProgressStepper({ \n  steps, \n  currentStep, \n  orientation = 'vertical',\n  showProgress = true,\n  showTimers = false\n}: ProgressStepperProps) {\n  const getStepIcon = (step: ProgressStep) => {\n    switch (step.status) {\n      case 'completed':\n        return <CheckCircle className=\"w-5 h-5 text-green-400\" />;\n      case 'error':\n        return <AlertCircle className=\"w-5 h-5 text-red-400\" />;\n      case 'active':\n        return <Loader2 className=\"w-5 h-5 text-blue-400 animate-spin\" />;\n      default:\n        return <div className=\"w-5 h-5 rounded-full border-2 border-white/30\" />;\n    }\n  };\n\n  const getStepColors = (step: ProgressStep) => {\n    switch (step.status) {\n      case 'completed':\n        return 'text-green-400 border-green-400/50';\n      case 'error':\n        return 'text-red-400 border-red-400/50';\n      case 'active':\n        return 'text-blue-400 border-blue-400/50';\n      default:\n        return 'text-white/60 border-white/30';\n    }\n  };\n\n  const formatTime = (seconds: number): string => {\n    if (seconds < 60) return `${Math.round(seconds)}s`;\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.round(seconds % 60);\n    return `${mins}m ${secs}s`;\n  };\n\n  if (orientation === 'horizontal') {\n    return (\n      <div className=\"glassmorphic-card p-6\">\n        <div className=\"flex items-center justify-between\">\n          {steps.map((step, index) => (\n            <div key={step.id} className=\"flex items-center flex-1\">\n              <div className={`flex flex-col items-center text-center ${getStepColors(step)}`}>\n                <div className=\"mb-2\">\n                  {getStepIcon(step)}\n                </div>\n                <div className=\"text-sm font-medium\">{step.label}</div>\n                {step.description && (\n                  <div className=\"text-xs text-white/60 mt-1\">{step.description}</div>\n                )}\n                {showProgress && step.progress !== undefined && step.status === 'active' && (\n                  <div className=\"mt-2 text-xs text-blue-400\">\n                    {Math.round(step.progress)}%\n                  </div>\n                )}\n              </div>\n              {index < steps.length - 1 && (\n                <div className=\"flex-1 h-px bg-white/20 mx-4\" />\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"glassmorphic-card p-6\">\n      <div className=\"space-y-4\">\n        {steps.map((step, index) => (\n          <div key={step.id} className=\"flex items-start space-x-4\">\n            <div className=\"flex flex-col items-center\">\n              {getStepIcon(step)}\n              {index < steps.length - 1 && (\n                <div className=\"w-px h-8 bg-white/20 mt-2\" />\n              )}\n            </div>\n            \n            <div className=\"flex-1 min-w-0\">\n              <div className={`font-medium ${getStepColors(step)}`}>\n                {step.label}\n              </div>\n              {step.description && (\n                <div className=\"text-white/60 text-sm mt-1\">\n                  {step.description}\n                </div>\n              )}\n              \n              {/* Progress bar for active step */}\n              {showProgress && step.progress !== undefined && step.status === 'active' && (\n                <div className=\"mt-2\">\n                  <div className=\"flex justify-between items-center text-xs text-white/60 mb-1\">\n                    <span>Progress</span>\n                    <span>{Math.round(step.progress)}%</span>\n                  </div>\n                  <div className=\"w-full h-2 bg-white/10 rounded-full overflow-hidden\">\n                    <div \n                      className=\"h-full bg-blue-400 transition-all duration-300 ease-out\"\n                      style={{ width: `${step.progress}%` }}\n                    />\n                  </div>\n                </div>\n              )}\n\n              {/* Timer information */}\n              {showTimers && (step.timeElapsed || step.timeRemaining) && (\n                <div className=\"mt-2 flex items-center space-x-4 text-xs text-white/60\">\n                  {step.timeElapsed && (\n                    <div className=\"flex items-center space-x-1\">\n                      <Clock className=\"w-3 h-3\" />\n                      <span>Elapsed: {formatTime(step.timeElapsed)}</span>\n                    </div>\n                  )}\n                  {step.timeRemaining && (\n                    <div className=\"flex items-center space-x-1\">\n                      <Clock className=\"w-3 h-3\" />\n                      <span>Remaining: {formatTime(step.timeRemaining)}</span>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface CircularProgressProps {\n  progress: number; // 0-100\n  size?: number;\n  strokeWidth?: number;\n  showPercentage?: boolean;\n  color?: string;\n  backgroundColor?: string;\n  children?: React.ReactNode;\n}\n\nexport function CircularProgress({\n  progress,\n  size = 120,\n  strokeWidth = 8,\n  showPercentage = true,\n  color = '#3B82F6',\n  backgroundColor = 'rgba(255, 255, 255, 0.1)',\n  children\n}: CircularProgressProps) {\n  const radius = (size - strokeWidth) / 2;\n  const circumference = radius * 2 * Math.PI;\n  const offset = circumference - (progress / 100) * circumference;\n\n  return (\n    <div className=\"relative\" style={{ width: size, height: size }}>\n      <svg\n        width={size}\n        height={size}\n        className=\"transform -rotate-90\"\n      >\n        {/* Background circle */}\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke={backgroundColor}\n          strokeWidth={strokeWidth}\n          fill=\"transparent\"\n        />\n        {/* Progress circle */}\n        <circle\n          cx={size / 2}\n          cy={size / 2}\n          r={radius}\n          stroke={color}\n          strokeWidth={strokeWidth}\n          fill=\"transparent\"\n          strokeDasharray={circumference}\n          strokeDashoffset={offset}\n          strokeLinecap=\"round\"\n          className=\"transition-all duration-500 ease-out\"\n        />\n      </svg>\n      \n      {/* Center content */}\n      <div className=\"absolute inset-0 flex items-center justify-center\">\n        {children || (showPercentage && (\n          <div className=\"text-center\">\n            <div className=\"text-2xl font-bold text-white\">\n              {Math.round(progress)}%\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\ninterface LinearProgressProps {\n  progress: number; // 0-100\n  height?: number;\n  color?: string;\n  backgroundColor?: string;\n  showPercentage?: boolean;\n  animated?: boolean;\n  indeterminate?: boolean;\n}\n\nexport function LinearProgress({\n  progress,\n  height = 8,\n  color = '#3B82F6',\n  backgroundColor = 'rgba(255, 255, 255, 0.1)',\n  showPercentage = false,\n  animated = false,\n  indeterminate = false\n}: LinearProgressProps) {\n  return (\n    <div className=\"w-full\">\n      {showPercentage && (\n        <div className=\"flex justify-between items-center text-sm text-white/70 mb-2\">\n          <span>Progress</span>\n          <span>{Math.round(progress)}%</span>\n        </div>\n      )}\n      \n      <div \n        className=\"w-full rounded-full overflow-hidden\"\n        style={{ height, backgroundColor }}\n      >\n        {indeterminate ? (\n          <div \n            className=\"h-full rounded-full\"\n            style={{\n              background: `linear-gradient(90deg, transparent, ${color}, transparent)`,\n              animation: 'indeterminate-progress 2s ease-in-out infinite',\n              width: '30%'\n            }}\n          />\n        ) : (\n          <div\n            className={`h-full rounded-full transition-all duration-300 ease-out ${\n              animated ? 'animate-pulse' : ''\n            }`}\n            style={{\n              width: `${progress}%`,\n              backgroundColor: color\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n}\n\ninterface StatusBadgeProps {\n  status: 'idle' | 'loading' | 'success' | 'error' | 'warning';\n  text?: string;\n  showIcon?: boolean;\n  size?: 'sm' | 'md' | 'lg';\n}\n\nexport function StatusBadge({ \n  status, \n  text, \n  showIcon = true, \n  size = 'md' \n}: StatusBadgeProps) {\n  const getStatusConfig = () => {\n    switch (status) {\n      case 'loading':\n        return {\n          bg: 'bg-blue-500/10 border-blue-500/30',\n          text: 'text-blue-400',\n          icon: <Loader2 className=\"animate-spin\" />,\n          defaultText: 'Loading...'\n        };\n      case 'success':\n        return {\n          bg: 'bg-green-500/10 border-green-500/30',\n          text: 'text-green-400',\n          icon: <CheckCircle />,\n          defaultText: 'Success'\n        };\n      case 'error':\n        return {\n          bg: 'bg-red-500/10 border-red-500/30',\n          text: 'text-red-400',\n          icon: <AlertCircle />,\n          defaultText: 'Error'\n        };\n      case 'warning':\n        return {\n          bg: 'bg-yellow-500/10 border-yellow-500/30',\n          text: 'text-yellow-400',\n          icon: <AlertCircle />,\n          defaultText: 'Warning'\n        };\n      default:\n        return {\n          bg: 'bg-gray-500/10 border-gray-500/30',\n          text: 'text-gray-400',\n          icon: <Music />,\n          defaultText: 'Idle'\n        };\n    }\n  };\n\n  const config = getStatusConfig();\n  \n  const sizeClasses = {\n    sm: 'px-2 py-1 text-xs',\n    md: 'px-3 py-1.5 text-sm',\n    lg: 'px-4 py-2 text-base'\n  };\n\n  const iconSizes = {\n    sm: 'w-3 h-3',\n    md: 'w-4 h-4',\n    lg: 'w-5 h-5'\n  };\n\n  return (\n    <div className={`\n      inline-flex items-center space-x-2 border rounded-full font-medium\n      ${config.bg} ${config.text} ${sizeClasses[size]}\n    `}>\n      {showIcon && (\n        <div className={iconSizes[size]}>\n          {config.icon}\n        </div>\n      )}\n      <span>{text || config.defaultText}</span>\n    </div>\n  );\n}\n\ninterface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  color?: string;\n  text?: string;\n}\n\nexport function LoadingSpinner({ \n  size = 'md', \n  color = 'text-blue-400',\n  text \n}: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12'\n  };\n\n  return (\n    <div className=\"flex flex-col items-center space-y-2\">\n      <Loader2 className={`${sizeClasses[size]} ${color} animate-spin`} />\n      {text && (\n        <div className=\"text-white/60 text-sm\">{text}</div>\n      )}\n    </div>\n  );\n}"],"names":["f","require$$0","k","Symbol","for","l","m","Object","prototype","hasOwnProperty","n","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","p","key","ref","__self","__source","q","c","a","g","b","d","e","h","call","defaultProps","$$typeof","type","props","_owner","current","reactJsxRuntime_production_min","jsx","jsxs","jsxRuntimeModule","exports","PerformanceCategory","PerformanceMonitor","metrics","alerts","memorysamples","thresholds","maxMetrics","memoryMonitorInterval","constructor","this","startMemoryMonitoring","setupPerformanceObserver","window","PerformanceObserver","list","entry","getEntries","recordSystemMetric","name","startTime","entryType","duration","observe","entryTypes","size","element","tagName","performance","now","value","hadRecentInput","error","setInterval","memoryUsage","getCurrentMemoryUsage","push","timestamp","Date","usage","length","slice","checkMemoryAlerts","memory","usedJSHeapSize","currentUsage","memoryLimit","criticalLimit","createAlert","metric","threshold","actualValue","severity","suggestion","alert","id","Math","random","toString","substr","metadata","endTime","tags","category","trimMetrics","startTiming","endTiming","additionalMetadata","find","checkPerformanceAlerts","getPerformanceSuggestion","metricName","recordInstantMetric","timeFunction","fn","result","Promise","finally","Error","message","getMetrics","getMetricsByCategory","filter","getMetricsByName","getAverageByName","reduce","sum","getReport","completedMetrics","summary","totalMetrics","averageDuration","slowestOperation","slowest","fastestOperation","fastest","byCategory","values","acc","categoryMetrics","totalDuration","count","peak","max","map","s","samples","paintMetrics","lcpMetrics","firstContentfulPaint","largestContentfulPaint","getAlerts","clearAlerts","clearMetrics","setThreshold","getThreshold","exportData","data","toISOString","userAgent","navigator","url","location","href","JSON","stringify","destroy","clearInterval","FileUpload","onFileSelect","isProcessing","engineReady","isDragOver","setIsDragOver","useState","selectedFile","setSelectedFile","validation","setValidation","fileInputRef","useRef","validateFile","useCallback","file","warnings","includes","match","isValid","toFixed","toLowerCase","handleFile","handleDrop","preventDefault","files","Array","from","dataTransfer","handleDragOver","handleDragLeave","handleFileInput","target","clearFile","style","display","flexDirection","gap","children","baseStyle","borderWidth","borderStyle","borderRadius","padding","transition","cursor","background","borderColor","boxShadow","transform","opacity","getDropzoneStyle","onDrop","onDragOver","onDragLeave","onClick","click","textAlign","marginBottom","className","width","height","margin","border","borderTop","animation","CheckCircle","color","AlertCircle","Upload","fontSize","marginTop","accept","onChange","disabled","alignItems","justifyContent","flex","File","flexShrink","minWidth","fontWeight","overflow","textOverflow","whiteSpace","bytes","onMouseEnter","currentTarget","onMouseLeave","X","warning","idx","AnalysisResults","analysisData","isAnalyzing","activeTab","setActiveTab","showGrid","setShowGrid","showLabels","setShowLabels","isAnimated","setIsAnimated","canvasRef","tabs","icon","BarChart3","description","Waves","Activity","Music","stats","tempo","bpm","label","spectral","centroid","mean","minutes","floor","seconds","padStart","getAnalysisOverview","stat","tab","title","Eye","EyeOff","link","document","createElement","download","toDataURL","Download","t","imageRendering","Fragment","rolloff","brightness","confidence","beats","scale","mfcc","min","RealtimeVisualizationEngine","canvas","ctx","audioContext","analyser","sourceNode","realtimeAnimationId","isRunning","config","fps","smoothing","sensitivity","showWaveform","showSpectrum","showBeats","colorScheme","beatSensitivity","spectralRange","beatTracker","spectralHistory","maxHistoryLength","visualizationCallbacks","context","getContext","BeatTracker","setupAudioContext","AudioContext","webkitAudioContext","createAnalyser","fftSize","smoothingTimeConstant","minDecibels","maxDecibels","connectAudioElement","audioElement","state","resume","disconnect","createMediaElementSource","connect","destination","setAnalysisData","setTempo","updateConfig","newConfig","setSensitivity","startVisualization","then","animate","catch","stopVisualization","cancelAnimationFrame","timingId","VISUALIZATION","bufferLength","frequencyBinCount","waveformData","Float32Array","spectrumData","Uint8Array","getFloatTimeDomainData","getByteFrequencyData","spectrum","i","shift","rms","calculateRMS","abs","beatDetected","detectBeat","visualizationData","waveform","currentTime","currentBeat","getCurrentBeat","nextBeat","getNextBeat","renderRealtimeVisualization","forEach","callback","requestAnimationFrame","clearCanvas","getCanvasSize","pulse","fillStyle","fillRect","renderWaveform","renderSpectrum","renderBeatIndicators","renderAudioInfo","dimensions","strokeStyle","getColor","lineWidth","beginPath","sliceWidth","x","y","moveTo","lineTo","stroke","startY","spectrumHeight","barWidth","gradient","createLinearGradient","addColorStop","barHeight","centerX","centerY","radius","arc","PI","fill","renderBeatTimeline","timelineY","timelineWidth","timeScale","beatTime","relativeTime","visibleRange","currentX","font","rmsPercent","round","peakPercent","fillText","schemes","default","text","neon","warm","cool","sqrt","clearRect","onVisualizationData","index","indexOf","splice","getSpectralHistory","getCurrentAudioData","close","lastBeatTime","energyHistory","beatThreshold","beatTimes","energy","calculateSpectralEnergy","averageEnergy","variance","pow","timeSinceLastBeat","minBeatInterval","lowEnd","closest","minDistance","Infinity","distance","TransportControls","audioFile","onPlaybackProgress","onPlaybackStateChange","enableRealtimeVisualization","audioRef","progressRef","visualizationCanvasRef","visualizationEngineRef","isDragging","setIsDragging","setVisualizationData","playbackState","setPlaybackState","isPlaying","volume","isMuted","isRepeat","isShuffle","useEffect","unsubscribe","audio","objectUrl","URL","createObjectURL","src","handleLoadedMetadata","prev","handleTimeUpdate","handleEnded","play","handleError","addEventListener","revokeObjectURL","removeEventListener","togglePlay","async","pause","stop","seek","time","skipBackward","skipForward","toggleMute","newMuted","muted","setVolume","clampedVolume","toggleRepeat","toggleShuffle","handleProgressClick","rect","getBoundingClientRect","newTime","clientX","left","handleProgressDrag","handleMouseMove","moveEvent","handleMouseUp","formatTime","isNaN","progressPercentage","isDisabled","preload","Shuffle","SkipBack","Pause","Play","Square","SkipForward","Repeat","onMouseDown","VolumeX","Volume2","step","parseFloat","ExportFunctionality","selectedExports","setSelectedExports","Set","exportFormat","setExportFormat","isExporting","setIsExporting","showAdvanced","setShowAdvanced","exportOptions","format","Database","FileText","Image","formatAnalysisDataAsJSON","filename","exportDate","version","analysis","formatAnalysisDataAsCSV","rows","entries","feature","charAt","toUpperCase","join","generateSummaryReport","lines","repeat","mins","secs","toLocaleString","downloadFile","content","mimeType","blob","Blob","handleExport","option","baseFilename","replace","copyToClipboard","clipboard","writeText","shareAnalysis","shareData","share","Share2","Settings","Copy","NotificationContext","createContext","useNotifications","useContext","NotificationProvider","maxNotifications","notifications","setNotifications","addNotification","notification","newNotification","persistent","setTimeout","removeNotification","clearAll","Provider","NotificationContainer","NotificationItem","isVisible","setIsVisible","isRemoving","setIsRemoving","timer","clearTimeout","handleRemove","colors","bg","getColors","AlertTriangle","Info","action","useNotificationHelpers","success","options","info","analysisComplete","analysisError","reload","fileUploaded","engineError","ProgressStepper","steps","currentStep","orientation","showProgress","showTimers","getStepIcon","status","Loader2","getStepColors","progress","timeElapsed","timeRemaining","Clock","CircularProgress","strokeWidth","showPercentage","backgroundColor","circumference","offset","cx","cy","r","strokeDasharray","strokeDashoffset","strokeLinecap","StatusBadge","showIcon","defaultText","getStatusConfig","sm","md","lg"],"mappings":"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","x_google_ignoreList":[0,1]}