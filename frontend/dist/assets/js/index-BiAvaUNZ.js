import{P as e,a as t,j as s,N as a,u as n,S as r,F as i,T as l,b as o,C as c,A as u,E as d}from"./components-DJtJ1Bhn.js";import{b as m,r as h}from"./vendor-CpqJgtbW.js";import{h as g,a as p,E as y,b as f,R as x}from"./engines-DNTQv6Jj.js";import{B as k,k as w,Z as b,p as C,b as v,A as R,C as j}from"./ui-DQne-7Ya.js";var N;!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var A=m;N=A.createRoot,A.hydrateRoot;class S{config={chunkSize:441e3,overlapSize:44100,maxFileSize:104857600,analysisFeatures:{spectral:!0,tempo:!0,key:!0,mfcc:!0,onset:!0},enableProgressiveResults:!0,memoryLimit:52428800};worker=null;isAnalyzing=!1;currentAnalysisId=null;chunkResults=new Map;aggregatedResult={};constructor(e){e&&(this.config={...this.config,...e}),this.initializeWorker()}async initializeWorker(){try{const e=this.generateWorkerCode(),t=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(t);this.worker=new Worker(s),this.worker.onmessage=this.handleWorkerMessage.bind(this),this.worker.onerror=e=>this.handleWorkerError(new Error(e.message)),URL.revokeObjectURL(s)}catch(e){}}generateWorkerCode(){return"\n      let essentia = null;\n      let isInitialized = false;\n      let chunkResults = new Map();\n\n      // Simplified mock implementation for development\n      // In production, this would use real Essentia.js\n      async function initializeEssentia() {\n        // Mock initialization\n        await new Promise(resolve => setTimeout(resolve, 100));\n        isInitialized = true;\n        \n        postMessage({\n          type: 'WORKER_READY',\n          payload: { success: true }\n        });\n      }\n\n      function analyzeChunk(chunkData, chunkIndex, config) {\n        return new Promise((resolve) => {\n          // Simulate chunk analysis\n          setTimeout(() => {\n            const mockResult = {\n              chunkIndex,\n              spectral: config.analysisFeatures.spectral ? {\n                centroid: { mean: 1000 + Math.random() * 1000, std: 100 },\n                rolloff: { mean: 2000 + Math.random() * 1000, std: 200 },\n                flux: { mean: Math.random() * 0.5, std: 0.1 }\n              } : undefined,\n              tempo: config.analysisFeatures.tempo ? {\n                bpm: 80 + Math.random() * 60,\n                confidence: 0.7 + Math.random() * 0.3\n              } : undefined,\n              mfcc: config.analysisFeatures.mfcc ? \n                Array.from({length: 13}, () => (Math.random() - 0.5) * 10) : undefined\n            };\n            \n            resolve(mockResult);\n          }, 100 + Math.random() * 200);\n        });\n      }\n\n      function aggregateResults(chunkResults) {\n        const results = Array.from(chunkResults.values());\n        if (results.length === 0) return {};\n\n        const aggregated = {};\n\n        // Aggregate spectral features\n        const spectralResults = results.filter(r => r.spectral);\n        if (spectralResults.length > 0) {\n          aggregated.spectral = {\n            centroid: {\n              mean: spectralResults.reduce((sum, r) => sum + r.spectral.centroid.mean, 0) / spectralResults.length,\n              std: Math.sqrt(spectralResults.reduce((sum, r) => sum + Math.pow(r.spectral.centroid.std, 2), 0) / spectralResults.length)\n            },\n            rolloff: {\n              mean: spectralResults.reduce((sum, r) => sum + r.spectral.rolloff.mean, 0) / spectralResults.length,\n              std: Math.sqrt(spectralResults.reduce((sum, r) => sum + Math.pow(r.spectral.rolloff.std, 2), 0) / spectralResults.length)\n            },\n            flux: {\n              mean: spectralResults.reduce((sum, r) => sum + r.spectral.flux.mean, 0) / spectralResults.length,\n              std: Math.sqrt(spectralResults.reduce((sum, r) => sum + Math.pow(r.spectral.flux.std, 2), 0) / spectralResults.length)\n            }\n          };\n        }\n\n        // Aggregate tempo (use most confident result)\n        const tempoResults = results.filter(r => r.tempo);\n        if (tempoResults.length > 0) {\n          const bestTempo = tempoResults.reduce((best, current) => \n            current.tempo.confidence > best.tempo.confidence ? current : best);\n          aggregated.tempo = bestTempo.tempo;\n        }\n\n        // Aggregate MFCC (average)\n        const mfccResults = results.filter(r => r.mfcc);\n        if (mfccResults.length > 0) {\n          const mfccLength = mfccResults[0].mfcc.length;\n          aggregated.mfcc = Array.from({length: mfccLength}, (_, i) => \n            mfccResults.reduce((sum, r) => sum + r.mfcc[i], 0) / mfccResults.length\n          );\n        }\n\n        return aggregated;\n      }\n\n      self.onmessage = async function(event) {\n        const { type, payload, id } = event.data;\n\n        switch (type) {\n          case 'ANALYZE_CHUNK':\n            if (!isInitialized) {\n              postMessage({\n                type: 'ERROR',\n                payload: { error: 'Worker not initialized' },\n                id\n              });\n              return;\n            }\n\n            try {\n              const { chunkData, chunkIndex, totalChunks, config } = payload;\n              \n              const chunkResult = await analyzeChunk(chunkData, chunkIndex, config);\n              chunkResults.set(chunkIndex, chunkResult);\n              \n              // Calculate aggregated results\n              const aggregated = aggregateResults(chunkResults);\n              \n              postMessage({\n                type: 'CHUNK_COMPLETE',\n                payload: {\n                  chunkIndex,\n                  totalChunks,\n                  partialResult: chunkResult,\n                  aggregatedResult: aggregated,\n                  isComplete: chunkResults.size === totalChunks,\n                  processingTime: 100 + Math.random() * 200\n                },\n                id\n              });\n\n            } catch (error) {\n              postMessage({\n                type: 'ERROR',\n                payload: { error: error.message, chunkIndex: payload.chunkIndex },\n                id\n              });\n            }\n            break;\n\n          case 'RESET':\n            chunkResults.clear();\n            break;\n        }\n      };\n\n      // Initialize on startup\n      initializeEssentia();\n    "}handleWorkerMessage(e){const{type:t,payload:s,id:a}=e.data;switch(t){case"WORKER_READY":break;case"CHUNK_COMPLETE":this.handleChunkComplete(s);break;case"ERROR":this.handleWorkerError(new Error(s.error))}}handleChunkComplete(e){if(this.chunkResults.set(e.chunkIndex,e.partialResult),this.aggregatedResult=e.aggregatedResult,this.progressCallback){const t=e.chunkIndex/e.totalChunks;this.progressCallback({progress:t,stage:"analyzing",percentage:Math.round(100*t),currentStep:"streaming-analysis",completedSteps:[],message:`Analyzing chunk ${e.chunkIndex+1} of ${e.totalChunks}...`})}this.checkMemoryUsage(),this.config.enableProgressiveResults&&this.progressiveCallback&&this.progressiveCallback(e),e.isComplete&&this.completeCallback&&this.finalizeAnalysis()}handleWorkerError(e){g(e,"streaming-analysis"),this.isAnalyzing=!1}checkMemoryUsage(){if("undefined"!=typeof performance&&performance.memory){const e=performance.memory.usedJSHeapSize;e>this.config.memoryLimit&&(p("memory-usage",e,this.config.memoryLimit),this.clearOldChunkResults())}}clearOldChunkResults(){const e=Array.from(this.chunkResults.keys()).sort((e,t)=>t-e).slice(0,5);for(const t of this.chunkResults.keys())e.includes(t)||this.chunkResults.delete(t)}async finalizeAnalysis(){const s=e.startTiming("streaming.finalization",t.ANALYSIS);try{const e={...this.aggregatedResult,duration:this.totalDuration,sampleRate:this.sampleRate,channels:this.channels,performance:{totalAnalysisTime:performance.now()-this.analysisStartTime,breakdown:{"streaming-analysis":performance.now()-this.analysisStartTime},memoryUsage:this.getCurrentMemoryUsage()}};this.isAnalyzing=!1,this.currentAnalysisId=null,this.completeCallback&&this.completeCallback(e)}catch(a){g(a,"finalization")}finally{e.endTiming(s)}}getCurrentMemoryUsage(){return"undefined"!=typeof performance&&performance.memory?performance.memory.usedJSHeapSize:0}progressCallback=null;progressiveCallback=null;completeCallback=null;analysisStartTime=0;totalDuration=0;sampleRate=44100;channels=1;async analyzeFile(e,t,s){if(this.isAnalyzing)throw new Error("Analysis already in progress");if(e.size>this.config.maxFileSize)throw new Error(`File too large for streaming analysis: ${e.size} bytes (max: ${this.config.maxFileSize})`);this.isAnalyzing=!0,this.analysisStartTime=performance.now(),this.progressCallback=t??null,this.progressiveCallback=s??null;try{const t=await this.decodeAudioFile(e);this.totalDuration=t.duration,this.sampleRate=t.sampleRate,this.channels=t.numberOfChannels;const s=this.createAudioChunks(t);return this.worker?.postMessage({type:"RESET"}),this.chunkResults.clear(),this.aggregatedResult={},new Promise((e,t)=>{this.completeCallback=e,this.processChunksSequentially(s)})}catch(a){throw this.isAnalyzing=!1,a}}async decodeAudioFile(s){const a=e.startTiming("streaming.decode",t.FILE_OPERATIONS);try{const e=await s.arrayBuffer(),t=new(window.AudioContext||window.webkitAudioContext),a=await t.decodeAudioData(e);return await t.close(),a}catch(n){throw new Error(`Failed to decode audio file: ${n instanceof Error?n.message:"Unknown error"}`)}finally{e.endTiming(a)}}createAudioChunks(e){const t=[],s=e.getChannelData(0),a=s.length,n=this.config.chunkSize-this.config.overlapSize;let r=0;for(let i=0;i<a;i+=n){const n=Math.min(i+this.config.chunkSize,a),l=s.slice(i,n);t.push({index:r,startTime:i/e.sampleRate,endTime:n/e.sampleRate,audioData:l,sampleRate:e.sampleRate,isComplete:n>=a}),r++}return t}async processChunksSequentially(e){for(let t=0;t<e.length;t++){const s=e[t];t>0&&t%5==0&&await this.waitForMemoryCleanup(),this.worker?.postMessage({type:"ANALYZE_CHUNK",payload:{chunkData:s.audioData,chunkIndex:s.index,totalChunks:e.length,config:this.config},id:`chunk-${s.index}`}),await new Promise(e=>setTimeout(e,10))}}async waitForMemoryCleanup(){"gc"in window&&window.gc(),await new Promise(e=>setTimeout(e,100))}updateConfig(e){this.config={...this.config,...e}}getConfig(){return{...this.config}}isAnalysisInProgress(){return this.isAnalyzing}getCurrentProgress(){const e=this.chunkResults.size;return{chunksCompleted:e,totalChunks:e,progressPercentage:e>0?e/e*100:0}}cancelAnalysis(){this.isAnalyzing=!1,this.currentAnalysisId=null,this.chunkResults.clear(),this.aggregatedResult={},this.worker?.postMessage({type:"RESET"})}destroy(){this.cancelAnalysis(),this.worker&&(this.worker.terminate(),this.worker=null)}}const M=new class{checks=new Map;lastCheck=null;autoCheckInterval=null;constructor(){this.registerDefaultChecks()}registerDefaultChecks(){this.checks.set("browser-support",async()=>{const e=[],t={};return window.AudioContext||window.webkitAudioContext||e.push("Web Audio API not supported"),window.Worker||e.push("Web Workers not supported"),window.OffscreenCanvas||(t.offscreenCanvas=!1),"createImageBitmap"in window||(t.imageBitmap=!1),window.WebAssembly||e.push("WebAssembly not supported"),{component:"browser-support",status:0===e.length?"healthy":"error",message:0===e.length?"Browser fully compatible":`Compatibility issues: ${e.join(", ")}`,details:t,timestamp:new Date}}),this.checks.set("memory",async()=>{const e=performance.memory,t={};if(e){const s=e.usedJSHeapSize/1048576,a=e.jsHeapSizeLimit/1048576,n=s/a;t.usedMB=Math.round(s),t.limitMB=Math.round(a),t.usagePercent=Math.round(100*n);let r="healthy",i=`Memory usage: ${t.usedMB}MB (${t.usagePercent}%)`;return n>.8?(r="error",i=`High memory usage: ${t.usagePercent}%`):n>.6&&(r="warning",i=`Moderate memory usage: ${t.usagePercent}%`),{component:"memory",status:r,message:i,details:t,timestamp:new Date}}return{component:"memory",status:"warning",message:"Memory information not available",details:t,timestamp:new Date}}),this.checks.set("performance",async()=>{const t=e.getReport(),s={totalMetrics:t.summary.totalMetrics,averageDuration:Math.round(t.summary.averageDuration),memoryPeak:Math.round(t.memoryUsage.peak/1048576)};let a="healthy",n="Performance metrics normal";if(t.summary.alerts.length>0){const e=t.summary.alerts.filter(e=>"critical"===e.severity);e.length>0?(a="error",n=`${e.length} critical performance issues`):(a="warning",n=`${t.summary.alerts.length} performance warnings`),s.alerts=t.summary.alerts.length}return{component:"performance",status:a,message:n,details:s,timestamp:new Date}}),this.checks.set("error-rate",async()=>{const e=y.getErrorStats(),t={totalErrors:e.total,recentErrors:e.recent,criticalErrors:e.bySeverity.critical};let s="healthy",a="Error rate normal";return e.bySeverity.critical>0?(s="error",a=`${e.bySeverity.critical} critical errors detected`):e.recent>5?(s="warning",a=`${e.recent} recent errors (last hour)`):a=0===e.total?"No errors detected":`${e.total} total errors (${e.recent} recent)`,{component:"error-rate",status:s,message:a,details:t,timestamp:new Date}}),this.checks.set("network",async()=>{const e=navigator.onLine,t=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s={online:e};t&&(s.effectiveType=t.effectiveType,s.downlink=t.downlink,s.rtt=t.rtt,s.saveData=t.saveData);let a="healthy",n="Network connection stable";return e?t&&"slow-2g"===t.effectiveType&&(a="warning",n="Slow network connection detected"):(a="error",n="No network connection"),{component:"network",status:a,message:n,details:s,timestamp:new Date}}),this.checks.set("audio-system",async()=>{const e={};try{const t=new(window.AudioContext||window.webkitAudioContext);return e.sampleRate=t.sampleRate,e.state=t.state,e.maxChannelCount=t.destination.maxChannelCount,await t.close(),{component:"audio-system",status:"healthy",message:`Audio system ready (${e.sampleRate}Hz, ${e.maxChannelCount}ch)`,details:e,timestamp:new Date}}catch(t){return{component:"audio-system",status:"error",message:`Audio system unavailable: ${t instanceof Error?t.message:"Unknown error"}`,details:e,timestamp:new Date}}})}async runHealthCheck(){const e=[],t=Array.from(this.checks.entries()).map(async([e,t])=>{try{return await t()}catch(s){return{component:e,status:"error",message:`Health check failed: ${s instanceof Error?s.message:"Unknown error"}`,timestamp:new Date}}}),s=await Promise.all(t);e.push(...s);const a=e.filter(e=>"healthy"===e.status).length,n=e.filter(e=>"warning"===e.status).length,r=e.filter(e=>"error"===e.status).length,i=Math.round(a/e.length*100);let l;l=r>0?r>e.length/2?"critical":"degraded":n>0?"degraded":"healthy";const o=this.generateRecommendations(e);return this.lastCheck={overall:l,score:i,checks:e,recommendations:o},this.lastCheck}generateRecommendations(e){const t=[];return e.forEach(e=>{if("error"===e.status||"warning"===e.status)switch(e.component){case"memory":e.details?.usagePercent>60&&t.push("Close unnecessary browser tabs and applications to free memory");break;case"performance":e.details?.alerts>0&&t.push("Check performance alerts for optimization opportunities");break;case"error-rate":e.details?.criticalErrors>0&&t.push("Review critical errors and consider refreshing the application");break;case"network":"warning"===e.status&&t.push("Network performance may affect audio file loading times");break;case"browser-support":t.push("Update your browser or try a different browser for better compatibility");break;case"audio-system":t.push("Check audio permissions and ensure no other applications are using audio")}}),"degraded"===this.lastCheck?.overall?t.push("Consider refreshing the page if performance continues to degrade"):"critical"===this.lastCheck?.overall&&t.push("Multiple system issues detected - restart the browser or try a different device"),Array.from(new Set(t))}getLastHealthCheck(){return this.lastCheck}startAutoCheck(e=3e4){this.autoCheckInterval&&clearInterval(this.autoCheckInterval),this.autoCheckInterval=window.setInterval(()=>{this.runHealthCheck().catch(e=>{})},e)}stopAutoCheck(){this.autoCheckInterval&&(clearInterval(this.autoCheckInterval),this.autoCheckInterval=null)}registerCustomCheck(e,t){this.checks.set(e,t)}removeCheck(e){return this.checks.delete(e)}getHealthStatus(){return this.lastCheck?.overall||"unknown"}getHealthScore(){return this.lastCheck?.score||0}};function z(){const[a,m]=h.useState({status:"initializing"}),[p,N]=h.useState(null),[A,z]=h.useState(null),[E,I]=h.useState(!1),[P,T]=h.useState(null),[D,L]=h.useState([]),[F,H]=h.useState("upload"),[$,O]=h.useState(null),[U,W]=h.useState(!1),[B,_]=h.useState(!1),K=h.useRef(null),q=h.useRef(null),Y=n();h.useEffect(()=>((async()=>{const s=e.startTiming("app.initialization",t.INITIALIZATION);try{K.current=new x,q.current=new S({chunkSize:220500,maxFileSize:209715200,enableProgressiveResults:!0});const e=await M.runHealthCheck();O(e),M.startAutoCheck(3e5),M.registerCustomCheck("audio-engine",async()=>{const e=K.current;if(!e)return{component:"audio-engine",status:"error",message:"Audio engine not initialized",timestamp:new Date};const t=e.getEngineStatus();return{component:"audio-engine",status:"ready"===t.status?"healthy":"error"===t.status?"error":"warning",message:t.message||`Engine status: ${t.status}`,details:{status:t.status,modelsLoaded:t.modelsLoaded,totalModels:t.totalModels},timestamp:new Date}}),y.onError(e=>{M.runHealthCheck().then(e=>{O(e)})})}catch(a){Y.error("System Initialization Failed","Failed to initialize audio analysis system. Please refresh the page.",{persistent:!0})}finally{e.endTiming(s)}})(),()=>{M.stopAutoCheck(),K.current?.terminate(),q.current?.destroy(),e.destroy()}),[]),h.useEffect(()=>{const e=()=>{if(!K.current)return;const e=K.current.getEngineStatus();m(e),"ready"===e.status&&"ready"!==a.status?(Y.engineReady(),M.runHealthCheck().then(e=>{O(e)})):"error"===e.status&&"error"!==a.status&&Y.engineError(e.message||"Unknown engine error")},t=setInterval(e,1e3);return e(),()=>clearInterval(t)},[a.status]);const Z=h.useCallback(()=>[{id:"preprocessing",label:"Preprocessing",description:"Preparing audio data for analysis",status:"pending"},{id:"spectral",label:"Spectral Analysis",description:"Extracting frequency domain features",status:"pending"},{id:"tempo",label:"Tempo Detection",description:"Analyzing rhythm and beat patterns",status:"pending"},{id:"key",label:"Key Detection",description:"Identifying musical key and scale",status:"pending"},{id:"mfcc",label:"MFCC Extraction",description:"Computing timbre characteristics",status:"pending"},{id:"finalization",label:"Finalization",description:"Compiling analysis results",status:"pending"}],[]),J=h.useCallback(async s=>{const a=e.startTiming("file.selection",t.FILE_OPERATIONS);try{if(s.size>209715200)throw new Error("File too large (max 200MB)");const e=s.size>52428800;_(e),e&&Y.info("Large File Detected","Using streaming analysis for optimal performance",{duration:3e3}),N(s),z(null),H("upload"),Y.fileUploaded(s.name)}catch(n){f(n,s.name,s.size)}finally{e.endTiming(a)}},[Y]),Q=h.useCallback(async()=>{if(!p||"ready"!==a.status||E)return;if(!(B?q.current:K.current))return void Y.error("Analysis Engine Not Available","Please refresh the page and try again.");I(!0),z(null),T(null);const s=Z();L(s),H("results");const n=e.startTiming("analysis.complete",t.ANALYSIS,{fileSize:p.size,fileName:p.name,streamingMode:B});try{const s=e=>{T(e),L(t=>t.map(t=>e.currentStep===t.id?{...t,status:"active",progress:Math.round(100*e.progress)}:e.completedSteps.includes(t.id)?{...t,status:"completed"}:t))};let a;if(B&&q.current)a=await q.current.analyzeFile(p,s);else{if(!K.current)throw new Error("No analysis engine available");a=await K.current.analyzeAudio(p,s)}L(e=>e.map(e=>({...e,status:"completed"}))),z(a),Y.analysisComplete(p.name),e.recordInstantMetric("analysis.success",1,t.ANALYSIS,{fileSize:p.size,duration:a.duration,streamingMode:B})}catch(r){L(e=>e.map(e=>"active"===e.status?{...e,status:"error"}:e)),g(r,"complete-analysis",{fileSize:p.size,streamingMode:B}),Y.analysisError(p.name,r instanceof Error?r.message:"Unknown error")}finally{I(!1),T(null),e.endTiming(n)}},[p,a.status,E,B,Z,Y]);return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:s.jsxs("div",{className:"container mx-auto px-6 py-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-5xl font-bold mb-4 text-white",children:"Harmonix Pro Analyzer"}),s.jsx("p",{className:"text-lg text-white/70 max-w-2xl mx-auto mb-4",children:"Enterprise-grade music analysis powered by Essentia.js WASM and ML models"}),s.jsxs("div",{className:"flex justify-center items-center space-x-6 mb-6",children:[s.jsx("div",{className:"glassmorphic-card p-3 flex items-center space-x-2",children:s.jsx(r,{status:"ready"===a.status?"success":"error"===a.status?"error":"loading",text:`Engine ${a.status}`,size:"sm"})}),$&&s.jsx("div",{className:"glassmorphic-card p-3 flex items-center space-x-2",children:s.jsxs("div",{className:`flex items-center space-x-1 ${(e=>{switch(e){case"healthy":return"text-green-400";case"degraded":return"text-yellow-400";case"critical":return"text-red-400";default:return"text-gray-400"}})($.overall)}`,children:[(e=>{switch(e){case"healthy":return s.jsx(j,{className:"w-4 h-4"});case"degraded":case"critical":return s.jsx(R,{className:"w-4 h-4"});default:return s.jsx(v,{className:"w-4 h-4"})}})($.overall),s.jsxs("span",{className:"text-sm font-medium",children:["System ",$.overall," (",$.score,"%)"]})]})}),s.jsxs("div",{className:"glassmorphic-card p-3 flex items-center space-x-2",children:[s.jsx(k,{className:"w-4 h-4 text-blue-400"}),s.jsxs("span",{className:"text-sm text-white/70",children:[e.getReport().summary.totalMetrics," metrics"]})]}),s.jsx("button",{onClick:()=>W(!U),className:"glassmorphic-button p-2 transition-colors "+(U?"text-blue-400":"text-white/60"),title:"Toggle advanced features",children:s.jsx(w,{className:"w-4 h-4"})})]}),U&&s.jsx("div",{className:"glassmorphic-card p-4 max-w-4xl mx-auto mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-white mb-2 flex items-center",children:[s.jsx(b,{className:"w-4 h-4 mr-1"}),"Performance Mode"]}),s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:B,onChange:e=>_(e.target.checked),className:"rounded"}),s.jsx("span",{className:"text-white/70",children:"Force streaming analysis"})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-white mb-2 flex items-center",children:[s.jsx(C,{className:"w-4 h-4 mr-1"}),"System Health"]}),$&&s.jsxs("div",{className:"text-white/70",children:[s.jsxs("div",{children:["Errors: ",y.getErrorStats().total]}),s.jsxs("div",{children:["Memory: ",Math.round($.checks.find(e=>"memory"===e.component)?.details?.usedMB||0),"MB"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white mb-2",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("button",{onClick:()=>M.runHealthCheck().then(e=>{O(e)}),className:"glassmorphic-button px-3 py-1 text-xs",children:"Refresh Health"}),s.jsx("button",{onClick:()=>e.clearMetrics(),className:"glassmorphic-button px-3 py-1 text-xs",children:"Clear Metrics"})]})]})]})}),s.jsx("div",{className:"flex justify-center space-x-2 mb-6",children:[{id:"upload",label:"Upload & Controls",disabled:!1},{id:"results",label:"Analysis Results",disabled:!p},{id:"export",label:"Export",disabled:!A},{id:"system",label:"System Status",disabled:!1}].map(e=>s.jsx("button",{onClick:()=>H(e.id),disabled:e.disabled,className:"glassmorphic-button px-6 py-2 transition-all "+(F===e.id?"bg-blue-500/20 border-blue-400/50 text-blue-300":e.disabled?"opacity-50 cursor-not-allowed":"hover:bg-white/5"),children:e.label},e.id))})]}),s.jsxs("div",{className:"max-w-6xl mx-auto",children:["upload"===F&&s.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(i,{onFileSelect:J,isProcessing:E,engineReady:"ready"===a.status}),p&&s.jsxs("div",{className:"glassmorphic-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"font-medium text-white",children:"Analysis Configuration"}),s.jsx(r,{status:B?"warning":"success",text:B?"Streaming Mode":"Standard Mode",size:"sm"})]}),s.jsx("div",{className:"text-sm text-white/70",children:B?"Large file detected - using memory-efficient streaming analysis":"Standard in-memory analysis for optimal performance"})]}),p&&!E&&s.jsx("div",{className:"glassmorphic-card p-6",children:s.jsx("button",{onClick:Q,disabled:"ready"!==a.status,className:"w-full glassmorphic-button p-4 text-lg font-semibold transition-all "+("ready"===a.status?"bg-green-500/20 border-green-400/50 text-green-300 hover:bg-green-500/30":"opacity-50 cursor-not-allowed"),children:"ðŸš€ Start Professional Analysis"})})]}),s.jsx("div",{children:s.jsx(l,{audioFile:p,isAnalyzing:E,analysisData:A,enableRealtimeVisualization:!0})})]}),"results"===F&&s.jsxs("div",{className:"space-y-6",children:[E&&D.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx(o,{steps:D,orientation:"horizontal",showProgress:!0,showTimers:!1}),P&&s.jsx("div",{className:"glassmorphic-card p-6 text-center",children:s.jsx(c,{progress:100*P.progress,size:120,showPercentage:!0,children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"text-2xl font-bold text-white",children:[Math.round(100*P.progress),"%"]}),s.jsx("div",{className:"text-xs text-white/60 mt-1",children:P.message})]})})})]}),s.jsx(u,{analysisData:A,isAnalyzing:E})]}),"export"===F&&s.jsx(d,{analysisData:A,audioFile:p,isAnalyzing:E}),"system"===F&&s.jsxs("div",{className:"space-y-6",children:[$&&s.jsxs("div",{className:"glassmorphic-card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Health Status"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.checks.map((e,t)=>s.jsxs("div",{className:"bg-white/5 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-white capitalize",children:e.component.replace("-"," ")}),s.jsx(r,{status:"healthy"===e.status?"success":"error"===e.status?"error":"warning",text:e.status,size:"sm"})]}),s.jsx("p",{className:"text-sm text-white/70",children:e.message}),e.details&&Object.keys(e.details).length>0&&s.jsx("div",{className:"mt-2 text-xs text-white/50",children:Object.entries(e.details).map(([e,t])=>s.jsxs("div",{children:[e,": ",String(t)]},e))})]},t))}),$.recommendations.length>0&&s.jsxs("div",{className:"mt-6",children:[s.jsx("h4",{className:"font-medium text-white mb-2",children:"Recommendations"}),s.jsx("ul",{className:"space-y-1 text-sm text-white/70",children:$.recommendations.map((e,t)=>s.jsxs("li",{className:"flex items-start space-x-2",children:[s.jsx("span",{className:"text-yellow-400 mt-0.5",children:"â€¢"}),s.jsx("span",{children:e})]},t))})]})]}),s.jsxs("div",{className:"glassmorphic-card p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Performance Metrics"}),s.jsx("div",{className:"text-sm text-white/70",children:"Performance monitoring active. Check browser console for detailed metrics."})]})]})]})]})})}function E(){return s.jsx(a,{maxNotifications:5,children:s.jsx(z,{})})}"undefined"!=typeof window&&(window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{})),N(document.getElementById("root")).render(s.jsx(h.StrictMode,{children:s.jsx(E,{})}));
//# sourceMappingURL=index-BiAvaUNZ.js.map
